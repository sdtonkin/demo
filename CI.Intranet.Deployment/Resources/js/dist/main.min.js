!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";angular.module("compassionIntranet",[]).config(function(e){e.resourceUrlWhitelist(["self","https://api.rss2json.com/**","https://api.ipify.org/**","https://api.yammer.com/**"])});n(41),n(40),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(67),n(66),n(68),n(69),n(70),n(71),n(42),n(43),n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(28),n(27),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(39),n(38)},function(e,t,n){"use strict";var r="anniversaryCardsCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","anniversaryService","COM_CONFIG",function(e,t,n){var r=this;r.places=[],r.activeTab="anniversary",this.$onInit=function(){t.getAnniversary().then(function(t){e.events=t})}}]).component("anniversaryCards",{template:n(72),controller:r,controlleras:"ctrl",bindings:{anniversarylimit:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="bookmarkPageController";r.controller(o,["$scope","bookmarkService","COM_CONFIG",function(e,t,n){var r=this,o=window.location.href,a=_spPageContextInfo.userId,s=_spPageContextInfo.pageItemId,i=_spPageContextInfo.webAbsoluteUrl;this.$onInit=function(){t.getMyBookmarks(a).then(function(e){r.myBookmarks=e})},r.isMyBookmark=function(){return _.findIndex(r.myBookmarks,function(e){return e.url==o})!=-1},r.addMyBookmark=function(){t.addMyBookmark(a,s,o,i).then(function(e){r.myBookmarks.push(e)})}}]).component("bookmarkPage",{template:n(73),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="contactsCtrl";r.controller(o,["$scope","common","contactService","COM_CONFIG",function(e,t,n,r){var o=this;this.$onInit=function(){var e=_spPageContextInfo.siteAbsoluteUrl;n.getContacts(e).then(function(e){o.contacts=e;for(var t=0;e.length>t;t++);})}}]).component("contacts",{template:n(74),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r="depNewsCtrl",o=angular.module("compassionIntranet");o.controller(r,function(e,t,n,r){e.newsSite=DISCOVER_CONFIG.rootWeb+"/news/pages/default.aspx",t.getNews().then(function(t){if(t.results){var r=t.results.filter(function(e){var t=e.ContentType;if(t.indexOf("Event")>0)return e}),o=t.results.filter(function(e){var t=e.ContentType;if(t.indexOf("Article")>0)return e});e.department=t.userDepartment,e.departmentUrl=t.departmentLink,e.newsLink=t.departmentLink+"pages/news.aspx",e.news=o,e.events=r}else n.isProduction||console.log("No department results")})}).component("departmentNews",{template:n(75),controller:r,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="employeeAnnouncementCtrl";r.controller(o,["$scope","common","employeeAnnouncementService","COM_CONFIG",function(e,t,n,r){var o=this;this.$onInit=function(){n.getAnnouncements().then(function(e){o.announcements=e})}}]).component("employeeAnnouncement",{template:n(76),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="employeeLifeCtrl";r.controller(o,function(e){function t(t){e.activeTab=t}var n=this;n.activeTab="US",e.toggleActiveTab=t,this.$onInit=function(){e.activeTab="US"}}).component("employeeLife",{template:n(77),controller:o,controlleras:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="employeeSpotlightCtrl";r.controller(o,["$rootScope","$scope","$q","COM_CONFIG",function(e,t,n,r){function o(){var e=a.submitGratitudeUrl;a.newFormUrl&&(e=newFormUrl);var t={};t.url=e,t.dialogReturnValueCallback=Function.createDelegate(null,null),SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",t)}var a=this;t.activeTab="g",this.$onInit=function(){r.isProduction||console.log("employeeSpotlightCtrl",a),t.viewAllUrl=a.viewAllGratitudesUrl,t.viewAllHiresUrl=a.viewAllHiresUrl,t.viewAllAnniversaryUrl=a.viewAllAnniversaryUrl},t.submitGratitude=function(){o()}}]).component("employeeSpotlight",{template:n(78),controller:o,controlleras:"ctrl",bindings:{viewAllGratitudesUrl:"@",submitGratitudeUrl:"@",viewAllHiresUrl:"@",viewAllAnniversaryUrl:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="findPeopleCtrl";r.controller(o,["$scope","graphService","COM_CONFIG",function(e,t,n){var r=this;this.$onInit=function(){e.isLowBandwidth=window.lowBandwidth,window.lowBandwidth||(t.getMyPeople().then(function(e){r.myPeople=e}),$("#ci-find-people-search").on("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;$("#ci-find-people-search").val();"13"==t&&r.searchUsers()}))},r.searchUsers=function(){window.location.href=n.delveSearchUrlPrefix+r.searchText+n.delveSearchUrlSuffix}}]).component("findPeople",{template:n(79),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="globalLinksController";r.controller(o,["$scope","$q","taxonomyService","COM_CONFIG",function(e,t,n,r){var o=this;o.globalGroups=[],o.activeTab="Global",this.$onInit=function(){n.getTermFromMasterTermsetByGuid(r.termSets.globalEmployeeLifeTermId).then(function(e){o.globalGroups=_.reject(e,function(e){return"Benefits"==e.name})})}}]).component("globalLinks",{template:n(80),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="globalPartnersController";r.controller(o,["$scope","$q","COM_CONFIG","globalPartnerService",function(e,t,n,r){var o=this;o.toggleVisibility=function(){return"places"==o.activeTab},e.$on("activeTab",function(e,t){o.activeTab=t}),this.$onInit=function(){r.getGlobalPartners().then(function(e){o.globalPartners=e})}}]).component("globalPartners",{template:n(81),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r="gratitudesCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","gratitudesService","COM_CONFIG",function(e,t,n){function r(e){e.length>0?o.card1=e[0]:e.length>1?o.card2=e[1]:e.length>2?o.card3=e[2]:e.length>3&&(o.card4=e[3])}var o=this;o.gratitudes=[],o.card1={},o.card2={},o.card3={},o.card4={},this.$onInit=function(){t.getGratitudes().then(function(t){e.gratitudes=t,r(t)})}}]).component("gratitudes",{template:n(82),controller:r,controlleras:"ctrl",bindings:{gratitudelimit:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="groupSummaryCtrl";r.controller(o,["$scope","common","groupService","COM_CONFIG",function(e,t,n,r){function o(e){var t=i.indexOf(e),n=l.indexOf(e);return t==-1&&n>-1}function a(e){var t=i.indexOf(e),n=l.indexOf(e);t!=-1?(i.splice(t,1),l.push(e)):n!=-1&&(l.splice(n,1),i.push(e))}var s=this,i=(_spPageContextInfo.userId,[]),l=[];s.toggleSummary=a,s.isGroupActive=o,this.$onInit=function(){n.getGroups().then(function(e){s.groups=e;for(var t=0;e.length>t;t++){var n=e[t];i.push(n.id)}})}}]).component("groupSummary",{template:n(83),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="howDoICtrl";r.controller(o,["$scope","$q","common","howDoIService","COM_CONFIG",function(e,t,n,r,o){var a=this;this.$onInit=function(){r.gethowDoI().then(function(e){a.howDoI=e})}}]).component("howDoI",{template:n(84),controller:o,controllerAs:"ctrl"})},function(e,t){"use strict";var n=angular.module("compassionIntranet");n.directive("imageLoader",function(){return{link:function e(t,n,r){t.$watch("window.lowBandwidth",function(){if(!window.lowBandwidth){var e="<img";e+=null!=t.imageSrc?' src="'+t.imageSrc+'"':"",e+=null!=t.imageAltText||""!=t.imageAltText?' alt="'+t.imageAltText+'"':"",e+=null!=t.imageCssClass?' class="'+t.imageCssClass+'"':"",e+=null!=t.imageWidth?' width="'+t.imageWidth+'"':"",e+=null!=t.imageHeight?' height="'+t.imageHeight+'"':"",e+=" />",n.append(e)}})},scope:{imageSrc:"@",imageCssClass:"@",imageAltText:"@",imageWidth:"@",imageHeight:"@"}}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="locationPlacesController";r.controller(o,["$scope","$q","taxonomyService","COM_CONFIG",function(e,t,n,r){var o=this;o.places=[],o.activeTab="people",this.$onInit=function(){n.getTermFromMasterTermsetByGuid(r.termSets.locationTermId).then(function(t){o.places=_.reject(t,function(e){return"US"==e.name});for(var n=0;o.places.length>n;n++)o.places[n].Nodes.map(function(e){e.siteUrl=null!=e.CustomProperties.SiteUrl?e.CustomProperties.SiteUrl:""});r.isProduction||console.log("places",o.places),e.$apply()})}}]).component("locationPlaces",{template:n(85),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="myAppsCtrl";r.controller(o,["$scope","common","appService","COM_CONFIG",function(e,t,n,r){var o=this;_spPageContextInfo.userId;e.$parent.$watch("ctrl.myApps",function(e,t,n){o.myApps=e,o.myAppsFromDb=n.ctrl.myAppsFromDb}),this.$onInit=function(){o.myApps=e.$parent.ctrl.myApps}}]).component("myApps",{template:n(86),controller:o,controllerAs:"ctrl",require:{parent:"^myToolbar"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="bookmarkCtrl";r.controller(o,["$scope","common","modalService","bookmarkService","COM_CONFIG",function(e,t,n,r,o){var a=this,s=(_spPageContextInfo.userId,!1);a.enableSaveButton=function(){return s&&(e.systemMessage=""),!s},this.$onInit=function(){a.myBookmarks=e.$parent.ctrl.myBookmarks},e.$parent.$watch("ctrl.myBookmarks",function(e,t,n){null!=e&&(a.myBookmarks=e,a.myBookmarksFromDb=n.ctrl.myBookmarksFromDb)})}]).component("myBookmarks",{template:n(87),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="myDepartmentController";r.controller(o,["$scope","$q","COM_CONFIG","userProfileService",function(e,t,n,r){var o=this,a=n.delveProfileUrl,s="/_layouts/15/userphoto.aspx?size=S&accountname=";o.toggleVisibility=function(){return"people"==o.activeTab},e.$on("activeTab",function(e,t){o.activeTab=t}),this.$onInit=function(){o.activeTab="people",r.getCurrentUserProfile().then(function(e){o.myProfile=e;var t=_.find(e.UserProfileProperties,function(e){return"Department"==e.Key}).Value;n.isProduction||console.log("getCurrentUserProfile",t),r.getUsersInMyDepartment(t).then(function(e){for(var t=[],n=0;e.length>n;n++){var r=e[n],i={};i.picUrl=s+r.UserName,i.title=r.Title,i.jobTitle=r.JobTitle,i.email=r.EMail,i.profileUrl=a+r.UserName,t.push(i)}o.myDepartment=t})})}}]).component("myDepartment",{template:n(88),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="myDocumentsCtrl";r.controller(o,["$scope","documentService","COM_CONFIG",function(e,t,n){var r=(_spPageContextInfo.userId,_spPageContextInfo.userDisplayName),o=this;this.$onInit=function(){t.getMyDocuments(r).then(function(e){o.myDocuments=e})}}]).component("myDocuments",{template:n(89),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="myRssFeedsCtrl";r.controller(o,["$scope","rssFeedService","COM_CONFIG",function(e,t,n){var r=this;r.showManager=!1,r.myFeeds=[],this.$onInit=function(){if(e.lowBandwidth=window.lowBandwidth,!window.lowBandwidth){var n=_spPageContextInfo.userId,o=null!=e.ctrl.articleLimit?e.ctrl.articleLimit:5;t.getMyRssFeeds(n,o).then(function(e){r.myFeeds=e})}}}]).component("myRssFeeds",{template:n(90),controller:o,controllerAs:"ctrl",bindings:{articleLimit:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="mySitesCtrl";r.controller(o,["$scope","common","spService","COM_CONFIG",function(e,t,n,r){var o=this;this.$onInit=function(){o.siteCollectionUrl=null==o.siteCollectionUrl?"https://compassion.sharepoint.com/sites/stage":o.siteCollectionUrl,n.getMySites(o.siteCollectionUrl).then(function(e){r.isProduction||console.log("sites",e),o.mySites=e})}}]).component("mySites",{template:n(91),controller:o,controllerAs:"ctrl",bindings:{siteCollectionUrl:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="toolbarCtrl";r.controller(o,["$scope","common","storage","modalService","appService","bookmarkService","graphService","COM_CONFIG",function(e,t,n,r,o,a,s,i){var l=this,c="navSelectedTab",d=(_spPageContextInfo.userId,_spPageContextInfo.userLoginName);l.toolbarSelectorId="ci-toolbar-selector",l.toolbarContainerId="ci-toolbar-container",l.toolbarContentClassName="toolbar-content",this.$onInit=function(){var e=n.get(c);l.selectedTabId=null==e?"ci-apps":e,o.getMyAppsByName(d).then(function(e){l.myAppsFromDb=e,l.myApps=angular.copy(e),i.isProduction||console.log("getMyAppsByName",e)}),a.getMyBookmarksByName(d).then(function(e){l.myBookmarks=angular.copy(e),l.myBookmarksFromDb=e,i.isProduction||console.log("getMyBookmarksByName",e)})},l.isSelected=function(e){return l.selectedTabId==e},l.select=function(e){n.set(c,e),l.selectedTabId!==e&&(l.selectedTabId=e)}}]).component("myToolbar",{template:n(106),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="navigationCtrl";r.controller(o,["$scope","navigationService","storage","COM_CONFIG",function(e,t,n,r){function o(){a.isSearchVisible=!a.isSearchVisible,a.isSearchVisible?($("div.search-background").show(),$("#searchQueryTerm").focus(),a.searchTitle="",$("#navbarContent").addClass("active")):($("div.search-background").hide(),a.searchTitle="Search",$("#navbarContent").removeClass("active"))}var a=this;a.isSearchVisible=!1,a.rootSiteUrl=r.rootWeb,a.goSearch=function(){window.location.href=r.searchWeb+"?k="+e.searchTerm},this.$onInit=function(){t.getAllNodes().then(function(e){a.navNodes=e}),$("div.search-background > input").on("focus",function(){var e=$("div.search-background > input").val();"Search"==e&&$("div.search-background > input").val("")}),$("div.search-background > input").on("blur",function(){var e=$("div.search-background > input").val();""==e&&$("div.search-background > input").val("Search")}),$("div.search-background > input").on("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;$("div.search-background > input").val();"13"==t&&(e.preventDefault(),a.goSearch())})},a.activeNavNode=function(e){var t=_spPageContextInfo.serverRequestPath.toLowerCase(),n=_spPageContextInfo.webServerRelativeUrl;return!!e.url.toLowerCase().endsWith(t)||(!!e.url.endsWith(n)||!(!_.contains(r.groupSites,window.location.origin+n)||"Groups"!=e.title))},a.toggleSearchBox=o,a.isSearchBoxVisible=!1,a.searchTitle="Search"}]).component("navigation",{template:n(92),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r="newHiresCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","newHireService","COM_CONFIG",function(e,t,n){this.$onInit=function(){t.getHire().then(function(t){n.isProduction||console.log("new hires",t),e.newHires=t})}}]).component("newHires",{template:n(93),controller:r,controlleras:"ctrl"})},function(e,t,n){"use strict";var r="newsEventsBrowserCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","$q","$location","newsService","taxonomyService","yammerApiService","pagerService","COM_CONFIG","common",function(e,t,n,r,o,a,s,i,l){function c(e){13===e.keyCode&&d()}function d(){"events"==I.activeTab?(r.getEvents(e.searchTerm).then(function(e){C=e,I.events=e,I.eventItems=e,I.setEventsPage(1)}),I.selectedRegion="",I.selectedCategory=""):(r.getNews(e.searchTerm).then(function(e){k=e,I.newsArticles=e,I.newsItems=e,I.setNewsPage(1)}),I.selectedRegion="",I.selectedCategory="")}function u(e){var t=_.sortBy(k,"RawArticleDate"),n=_.sortBy(C,"RawEventDate");"asc"==e.direction?(I.newsArticles=t,I.events=n):(I.newsArticles=t.reverse(),I.events=n.reverse());var r=_.reject(I.sortOptions,function(t){return t.title==e.title});r.unshift(e),I.sortOptions=r,I.setEventsPage(1),I.setNewsPage(1),$("#ci-filter-menu").removeClass("show")}function p(t){I.selectedCategory=t,e.selectedCategoryTitle=t.Key,"news"==I.activeTab?(I.newsArticles=_.filter(k,function(e){return e.NewsType==t.name}),I.newsItems=I.newsArticles,I.setNewsPage(1)):(I.events=_.filter(C,function(e){return e.EventType==t.name}),I.eventItems=I.events,I.setEventsPage(1))}function m(t){I.selectedRegion=t,e.selectedRegionTitle=t.Key,"news"==I.activeTab?(I.newsArticles=_.filter(k,function(e){return e.LocationTag==t.name}),0==I.newsArticles.length&&(I.newsArticles=_.filter(k,function(e){return _.find(t.Nodes,function(t){return t.name==e.LocationTag})})),I.newsItems=I.newsArticles,I.setNewsPage(1)):(I.events=_.filter(C,function(e){return e.LocationTag==t.name}),0==I.events.length&&(I.events=_.filter(C,function(e){return _.find(t.Nodes,function(t){return t.name==e.LocationTag})})),I.eventItems=I.events,I.setEventsPage(1))}function g(e){I.newsArticles=_.filter(k,function(t){return t.Group==e.name}),I.events=_.filter(C,function(t){return t.Group==e.name}),I.newsItems=I.newsArticles,I.setNewsPage(1),I.eventItems=I.events,I.setEventsPage(1)}function v(){"news"==I.activeTab?(I.newsArticles=k,I.setNewsPage(1)):(I.events=C,I.eventItems=I.events,I.setEventsPage(1)),I.selectedCategory="",e.selectedCategoryTitle="category"}function f(){"news"==I.activeTab?(I.newsArticles=k,I.setNewsPage(1)):(I.events=C,I.eventItems=I.events,I.setEventsPage(1)),I.selectedRegion="",e.selectedRegionTitle="region"}function h(){var e=o.getTermFromMasterTermsetByGuid(i.termSets.newsTypeTermId),n=o.getTermFromMasterTermsetByGuid(i.termSets.eventTypeTermId),a=o.getTermFromMasterTermsetByGuid(i.termSets.locationTermId),s=r.getNews(),l=r.getEvents();t.all([e,n,a,s,l]).then(function(e){i.isProduction||console.log("news and events",e),I.newsCategories=e[0],I.eventCategories=e[1],I.regions=e[2],k=e[3],I.newsArticles=e[3],C=e[4],I.events=e[4],I.categories="events"==I.activeTab?I.eventCategories:I.newsCategories,w(),I.setEventsPage(1),I.setNewsPage(1)})}function b(e){1>e||e>I.newsPager.totalPages||(I.newsPager=s.getPager(I.newsArticles.length,e),I.newsItems=I.newsArticles.slice(I.newsPager.startIndex,I.newsPager.endIndex+1))}function y(e){1>e||e>I.eventsPager.totalPages||(I.eventsPager=s.getPager(I.events.length,e),I.eventItems=I.events.slice(I.eventsPager.startIndex,I.eventsPager.endIndex+1))}function w(){var e=l.getUrlParamByName("newstype"),t=l.getUrlParamByName("location"),n=l.getUrlParamByName("group"),r=l.getUrlParamByName("activeTab");if(""!=r&&(I.activeTab=r),""!=e){var o={};o.name=e,p(o)}else if(""!=t){var o={};o.name=t,m(o)}else if(""!=n){var o={};o.name=n,g(o)}}var k,C,I=this;I.newsPager={},I.eventsPager={},I.setNewsPage=b,I.setEventsPage=y,I.newsItems=[],I.eventItems=[],I.newsCategories=[],I.eventCategories=[],I.categories=[],I.regions=[],I.sortOptions=[{title:"Newest First",direction:"dsc"},{title:"Oldest First",direction:"asc"}],I.newsArticles=[],I.events=[],I.activeTab="news",I.filterByCategory=p,I.filterByRegion=m,I.clearCategory=v,I.clearRegion=f,I.selectedRegion="",I.selectedCategory="",I.sortBy=u,I.goSearch=d,I.checkForGoSearch=c,e.searchTerm="",e.selectedCategoryTitle="category",e.selectedRegionTitle="region",this.$onInit=function(){h()}}]).component("newsEventsBrowser",{bindings:{default:"@"},template:n(94),controller:r,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="newsPageLikesController";r.controller(o,["$scope","yammerApiService",function(e,t){var n=this,r=window.location.href;this.$onInit=function(){e.isLowBandwidth=window.lowBandwidth,window.lowBandwidth||(null!=n.pageUrl?t.getLikeCountForMessage(n.pageUrl).then(function(e){n.likeCount=e}):null==n.threadId?t.getLikeCountForMessage(r).then(function(e){n.likeCount=e}):""==n.threadId?n.likeCount=0:t.getLikesByThreadId(n.threadId).then(function(e){n.likeCount=e}))}}]).component("newsPageLikes",{template:n(95),controller:o,controllerAs:"ctrl",bindings:{threadId:"@",pageUrl:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="peoplePlacesController";r.controller(o,["$rootScope","$scope","$q","COM_CONFIG",function(e,t,n,r){var o=this;o.activeTab="people",this.$onInit=function(){e.$broadcast("activeTab","people")},o.toggleActiveTab=function(t){o.activeTab=t,e.$broadcast("activeTab",t)}}]).component("peoplePlaces",{template:n(96),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r="photoShareCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","$q","$location","photoService","COM_CONFIG",function(e,t,n,r,o){function a(){var e=o.rootWeb+"/_layouts/15/Upload.aspx?List=%7B7CC88BAC-9CC9-4457-A59C-51FF5A21838D%7D&RootFolder=%2Fsites%2Fstage%2FmissionPhotos&ContentTypeId=0x0101009148F5A04DDD49CBA7127AADA5FB792B00AADE34325A8B49CDA8BB4DB53328F21401006059AB8EDD2AB649BE422D937A86AE6B";s.newFormUrl&&(e=newFormUrl);var t={};t.url=e,t.dialogReturnValueCallback=Function.createDelegate(null,null),SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",t)}var s=this;s.displayNewPhotoForm=a,this.$onInit=function(){e.viewAllUrl=s.viewAllPhotosUrl,e.isLowBandwidth=window.lowBandwidth,window.lowBandwidth||r.getPhotos().then(function(e){s.photos=e})}}]).component("photoShare",{bindings:{pictureLimit:"@",newFormUrl:"@",viewAllPhotosUrl:"@"},template:n(97),controller:r,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r="quickLinksCtrl";angular.module("compassionIntranet").controller(r,["$scope","listService","DISCOVER_CONFIG",function(e,t,n){var o=pnp.storage.local,a=moment(),s=$pnp.util.dateAdd(a,"minute",5);o.getOrPut(r,t.getMyLinks,s).then(function(t){e.news=t})}]).component("quickLinks",{template:n(98),controller:r,controlleras:"ctrl"})},function(e,t,n){"use strict";var r="relatedDocCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","relatedDocService","COM_CONFIG",function(e,t,n){t.getData().then(function(t){e.documents=n.rootWeb,0===t.length?e.notFound="No related documents found":t[0].contentType===!0&&(e.documents=t)})}]).component("relatedDoc",{template:n(101),controller:r,controlleras:"ctrl",bindings:{documentlimit:"@"}})},function(e,t,n){"use strict";var r="relatedNewsCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","relatedNewsService","COM_CONFIG","common",function(e,t,n,r){var o=this;e.notFound="Retrieving related articles...";var a=null==o.articleLimit?3:parseInt(o.articleLimit);this.$onInit=function(){var r=$("#article-news-type").text().trim(),o=window.location.href;t.getRelatedNews(r,o,a).then(function(t){e.newsSite=n.rootWeb+"/news/pages/default.aspx",n.isProduction||console.log("related news",t),0===t.length?e.notFound="No related stories found":(e.topImageUrl=null==t[0].ImageUrl?"":t[0].ImageUrl,e.notFound="",e.news=t)})}}]).component("relatedNews",{template:n(102),controller:r,controlleras:"ctrl",bindings:{articlelimit:"@"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="resourceLinks";r.controller(o,["$scope","$q","common","resourceLinksService","COM_CONFIG",function(e,t,n,r,o){var a=this;e.searchText="",this.$onInit=function(){r.getresourceLinks().then(function(e){a.resourceLinks=e})},a.searchTitle="Search",a.goSearch=function(){window.location.href=o.workResourceSearchUrl+"?k="+e.searchText}}]).component("resourceLinks",{template:n(103),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="rssFeedManagerCtrl";r.controller(o,["$scope","$q","common","modalService","rssFeedService","COM_CONFIG",function(e,t,n,r,o,a){function s(){u.isToolbarDirty=!1;var n,r=u.myFeeds,a=u.myFeedsFromDb,s=_.where(r,{id:-1});n=0==r.length?a:_.filter(a,function(e){return!_.findWhere(r,{id:e.id})});for(var i=[],l=0;s.length>l;l++){var c=s[l];i.push(o.addMyFeed(p,c.feedId))}for(var l=0;n.length>l;l++){var c=n[l];i.push(o.removeMyFeed(c.id))}t.all(i).then(function(t){o.getMyRssFeeds(p,e.$parent.ctrl.articleLimit).then(function(t){e.$parent.ctrl.myFeeds=angular.copy(t),u.isToolbarDirty=!1,u.systemMessage="Success"})})}function i(){return!u.isToolbarDirty}function l(){r.Open(u.manageBookmarkId)}function c(e){r.Close(e)}function d(e){if(!e)return!1;var t=_.find(u.myFeeds,function(t){return t.feedId==e});return null!=t}var u=this,p=_spPageContextInfo.userId;u.isToolbarDirty=!1,u.manageBookmarkId="ci-rss-feed-manage",u.existsFeedInMyFeeds=d,u.saveMyFeeds=s,u.enableSaveButton=i,u.openManageModal=l,u.closeModal=c,e.$parent.$watch("ctrl.myFeeds",function(e,t,n){null!=e&&(u.myFeeds=e,u.myFeedsFromDb=angular.copy(e))}),e.$parent.$watch("ctrl.showManager",function(e,t,n){1==e&&l()}),this.$onInit=function(){o.getAllRssFeeds().then(function(e){u.allFeeds=e})},e.toggleSelection=function(e){u.isToolbarDirty=!0;var t=_.find(u.myFeeds,function(t){return t.feedId==e});if(null==t){var n=_.find(u.myFeedsFromDb,function(t){return t.feedId==e});null==n&&(n=angular.copy(_.find(u.allFeeds,function(t){return t.id==e})),n.feedId=n.id,n.id=-1),u.myFeeds.push(n),u.myFeeds=_.sortBy(u.myFeeds,"sortOrder")}else{var r=u.myFeeds;u.myFeeds=_.reject(r,function(e){return e.id==t.id})}}}]).component("rssFeedManager",{template:n(99),controller:o,controllerAs:"ctrl",require:{parent:"^myRssFeeds"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="rssFeedsCtrl";r.controller(o,["$scope","rssFeedService","COM_CONFIG",function(e,t,n){var r=this;e.$parent.$watch("ctrl.myFeeds",function(t,n,o){null!=t&&(r.myFeeds=t,e.activeFeedId=t.length>0?t[0].id:0)}),this.$onInit=function(){r.articleLimit=r.articleLimit?r.articleLimit:5},e.toggleActiveFeed=function(t){e.activeFeedId=e.activeFeedId==t?0:t}}]).component("rssFeeds",{template:n(100),controller:o,controllerAs:"ctrl",bindings:{articleLimit:"@"}})},function(e,t,n){"use strict";var r="submitNewsCtrl",o=angular.module("compassionIntranet");o.controller(r,["$scope","$q","modalService","COM_CONFIG",function(e,t,n,r){function o(){var e=r.rootWeb+"/news/Lists/Story%20Submissions/NewForm.aspx?Source=https%3A%2F%2Fcompassion%2Esharepoint%2Ecom%2Fsites%2Fstage%2Fnews%2FLists%2FStory%2520Submissions%2FAllItems%2Easpx&ContentTypeId=0x010085D9BC346FD84547A9D01C1DD1FED37400FB5D38A32B37AD4E8E9EE8565F7C11E7&RootFolder=";a.newFormUrl&&(e=newFormUrl);var t={};t.url=e,t.dialogReturnValueCallback=Function.createDelegate(null,null),SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",t)}var a=this;a.submitNews=o}]).component("submitNews",{template:n(104),controller:r,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="toolbarManagerCtrl";r.controller(o,["$scope","$q","common","modalService","appService","bookmarkService","COM_CONFIG",function(e,t,n,r,o,a,s){function i(){return _.max(e.myAppsSortList)}function l(t){e.bookmarkIdToDelete=t.id,w(k.manageBookmarkId),y(k.confirmDeleteBookmarkId)}function c(){var e=null!=k.newBookmark&&n.isUrl(k.newBookmark.url),t=!1;return k.newBookmark.title&&(t=""!==k.newBookmark.title),!(k.isToolbarDirty&&e&&t)}function d(e,t){k.isToolbarDirty=!0;var n=k.myApps,r=e.sortOrder;if(r>t)for(var o=t-1;r>o;o++){var a=n[o];n[o].sortOrder=o==t-1?e.sortOrder:o==r-1?a.sortOrder-1:a.sortOrder-1}else if(t>r)for(var o=r-1;t>o;o++){var a=n[o];n[o].sortOrder=o==r-1?a.sortOrder+1:o==t-1?e.sortOrder:a.sortOrder+1}k.myApps=_.sortBy(n,"sortOrder")}function u(){for(var t=0;k.myApps.length>t;t++){var n=k.myApps[t];o.updateUserApp(n)}k.myAppsFromDb=angular.copy(k.myApps),isToolbarDirty=!1,e.systemMessage="Success"}function p(){if(e.bookmarkIdToDelete){var t=e.bookmarkIdToDelete;a.removeMyBookmark(t).then(function(n){var r=_.filter(k.myBookmarks,function(e){return e.id!==t});k.myBookmarks=angular.copy(r),k.myBookmarksFromDb=r,e.$parent.ctrl.myBookmarks=k.myBookmarks,e.$parent.ctrl.myBookmarksFromDb=k.myBookmarksFromDb,h(),e.bookmarkIdToDelete=null,w(k.confirmDeleteBookmarkId),y(k.manageBookmarkId),e.systemMessage="Successfully deleted the bookmark"})}}function m(){var t=k.newBookmark.title,n=k.newBookmark.url;a.addMyBookmark(C,t,n).then(function(t){k.enableAddNew=!1,k.isToolbarDirty=!1,k.isAddNewDirty=!1,k.systemMessage="Success adding bookmark",e.$parent.ctrl.myBookmarks.push(t),k.newBookmark=null})}function g(){k.isToolbarDirty=!1;for(var n=[],r=0;k.myBookmarks.length>r;r++){var o=a.updateUserBookmark(k.myBookmarks[r]);n.push(o)}t.all(n).then(function(t){a.getMyBookmarks(C).then(function(t){e.systemMessage="Success updating bookmarks",e.$parent.ctrl.myBookmarks=t})})}function v(e,t){for(var n=[],r=0;e.length>r;r++){var o=e[r],a=_.filter(t,function(e){return e.appId==o.appId});0==a.length&&n.push(o)}return n}function f(){k.isToolbarDirty=!1;var t=k.myApps,n=k.myAppsFromDb,r=_.where(t,{id:-1}),a=v(n,t);if(0==t.length)for(var s=0;k.myAppsFromDb.length>s;s++){var i=k.myAppsFromDb[s],l=s;o.removeMyApp(i.id).then(function(){l+1==k.myAppsFromDb.length&&o.getMyApps(C).then(function(t){k.parent.myAppsFromDb=t,k.parent.myApps=angular.copy(t),h(),e.systemMessage="Success"})})}else{for(var s=0;r.length>s;s++){var i=r[s],c=s;o.addMyApp(C,i.appId).then(function(){c+1==r.length&&o.getMyApps(C).then(function(t){k.parent.myAppsFromDb=t,k.parent.myApps=angular.copy(t),h(),e.systemMessage="Success"})})}for(var s=0;a.length>s;s++){var i=a[s],d=s;o.removeMyApp(i.id).then(function(){d+1==a.length&&o.getMyApps(C).then(function(t){k.parent.myAppsFromDb=t,k.parent.myApps=angular.copy(t),h(),e.systemMessage="Success"})})}}}function h(){if(null!=k.myApps){for(var t=k.myApps.length,n=[],r=1;t>=r;r++)n.push(r);e.myAppsSortList=n}}function b(){var t=e.$parent.ctrl.selectedTabId;r.Open(t+"-manage")}function y(e){r.Open(e)}function w(e){r.Close(e)}var k=this,C=_spPageContextInfo.userId;k.isToolbarDirty=!1,k.isAddNewDirty=!1,k.manageBookmarkId="ci-bookmarks-manage",k.confirmDeleteBookmarkId="ci-bookmarks-confirm-delete",e.$parent.$watch("ctrl.myApps",function(e,t,n){null!=e&&(k.myApps=e,k.myAppsFromDb=n.ctrl.myAppsFromDb,h())}),e.$parent.$watch("ctrl.myBookmarks",function(e,t,n){null!=e&&(k.myBookmarks=e,k.myBookmarksFromDb=n.ctrl.myBookmarksFromDb)}),e.$parent.$watch("ctrl.selectedTabId",function(e,t,n){null!=e&&(s.isProduction||console.log("selecteed tab id",e),k.selectedTabId=e)}),k.enableSaveBookmarkButton=c,k.newBookmark={},k.openModal=y,k.closeModal=w,k.saveMyApps=f,k.openManageModal=b,k.saveMyAppsSortOrder=u,k.updateSortOrder=d,k.saveMyNewBookmark=m,k.saveMyBookmarks=g,k.removeMyBookmark=p,k.confirmDeletion=l,k.enableAddNew=!1,k.addMyBookmark=function(){k.isAddNewDirty=!0,k.enableAddNew=!0,e.systemMessage=""},k.enableSaveButton=function(){return k.isToolbarDirty&&(e.systemMessage=""),!k.isToolbarDirty},k.enableAddNewButton=function(){return k.isAddNewDirty||(e.systemMessage=""),k.isAddNewDirty},k.enableAddNewSaveButton=function(){return k.isAddNewDirty||(e.systemMessage=""),!k.isAddNewDirty},this.$onInit=function(){k.myApps=e.$parent.ctrl.myApps,o.getAllApps().then(function(e){k.allApps=e}),k.viewAllDocumentsUrl=null==e.$parent.ctrl.viewAllDocumentsUrl?"#":e.$parent.ctrl.viewAllDocumentsUrl},e.myAppsSortList=[],e.existsAppInMyApps=function(e){if(!e)return!1;var t=_.find(k.myApps,function(t){return t.appId==e});return null!=t},e.toggleSelection=function(t){k.isToolbarDirty=!0;var n=_.find(k.myApps,function(e){return e.appId==t});if(null==n){var r=_.find(k.myAppsFromDb,function(e){return e.appId==t});null==r&&(r=_.clone(_.find(k.allApps,function(e){return e.id==t})),r.appId=r.id,r.id=-1,r.sortOrder=i()+1),k.myApps.push(r),k.myApps=_.sortBy(k.myApps,"sortOrder"),e.$parent.ctrl.myApps=k.myApps}else{var o=k.myApps;k.myApps=_.without(o,_.findWhere(o,{appId:t})),e.$parent.ctrl.myApps=k.myApps}}}]).component("toolbarManager",{template:n(105),controller:o,controllerAs:"ctrl",require:{parent:"^myToolbar"}})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="usLinksController";
r.controller(o,["$scope","$q","taxonomyService","COM_CONFIG",function(e,t,n,r){var o=this;o.groups=[],this.$onInit=function(){n.getTermFromMasterTermsetByGuid(r.termSets.usEmployeeLifeTermId).then(function(t){e.groups=_.reject(t,function(e){return"Benefits"==e.name}),e.$apply()})}}]).component("usLinks",{template:n(107),controller:o,controllerAs:"ctrl"})},function(e,t,n){"use strict";var r=angular.module("compassionIntranet"),o="weatherCtrl";r.controller(o,["$scope","weatherService","COM_CONFIG","storage",function(e,t,n,r){function o(n){t.getWeather(n,"F").then(function(t){e.noWeather=!1,e.title=t.title,e.temp=t.temp,e.text=t.text,e.city=t.city,e.state=t.state,e.image=t.weatherIcon,e.unit=t.unit})}function a(){t.getLocation().then(function(r){t.getWeather(r,"F").then(function(t){n.isProduction||console.log("weather",t),e.noWeather=!1,e.title=t.title,e.temp=t.temp,e.text=t.text,e.city=t.city,e.state=t.state,e.image=t.weatherIcon,e.unit=t.unit})})}var s,i,l=_.where(n.storage,function(e){return e.service="weatherService"}),c=_.find(l,function(e){return e.key.indexOf("LOCATION")!=-1}),d=_.find(l,function(e){return e.key.indexOf("WEATHER")!=-1});this.$onInit=function(){e.lowBandwidth=window.lowBandwidth,window.lowBandwidth||(i=r.get(d.key),null==i?(s=r.get(c.key),null!=s?o(s):a()):(e.noWeather=!1,e.title=i.title,e.temp=i.temp,e.text=i.text,e.city=i.city,e.state=i.state,e.image=i.weatherIcon,e.unit=i.unit))}}]).component("weatherControl",{template:n(108),controller:o,controllerAs:"ctrl"})},function(e,t){"use strict";var n="yammerLoginController",r=angular.module("compassionIntranet");r.controller(n,function(e,t){var n=this,r=!1;ES6Promise.polyfill(),this.$onInit=function(){n.checkForAuthToken().then(function(e){null!=e&&""!=e?(yam.platform.setAuthToken(e,function(e){console.log("Yammer -> setAuthToken finished")}),yam.getLoginStatus(function(t){if(t.authResponse){if("undefined"==t.access_token.token)return console.log("Yammer -> token is bad, clearing and logging in again."),void n.doLogin();yam.platform.setAuthToken(t.access_token.token,function(t){n.setUserProfileProperty(e).then(function(){localStorage.removeItem("yammer_token"),localStorage.setItem("yammer_token",t.access_token.token)})})}else console.log("Yammer -> not logged in.  Calling yam.platform.login()"),n.doLogin()})):n.doLogin()})},this.checkForAuthToken=function(){var e=t.defer(),n=localStorage.getItem("yammer_token");if(n&&"undefined"!==n)e.resolve(n);else{var o="i:0#.f|membership|"+_spPageContextInfo.userLoginName;$pnp.sp.profiles.getUserProfilePropertyFor(o,"YammerOAuth").then(function(t){t&&(r=!0,localStorage.removeItem("yammer_token"),localStorage.setItem("yammer_token",t)),e.resolve(t)})}return e.promise},this.setUserProfileProperty=function(e){var n=t.defer();return SP.SOD.executeFunc("SP.js","SP.ClientContext",function(){SP.SOD.executeFunc("userprofile","SP.UserProfiles.PeopleManager",function(){var t=SP.ClientContext.get_current(),o=new SP.UserProfiles.PeopleManager(t),a="i:0#.f|membership|"+_spPageContextInfo.userLoginName;o.setSingleValueProfileProperty(a,"YammerOAuth",e),t.executeQueryAsync(function(){console.log("yammer profile field updated!"),r=!0,n.resolve()},function(e,t){console.log("Error logging in to Yammer",t.get_message()),n.resolve()})})}),n.promise},this.doLogin=function(){yam.platform.login({},function(e){e.authResponse&&(console.log("Yammer -> logged in (initial logon)"),yam.platform.setAuthToken(e.access_token.token,function(e){r?(localStorage.removeItem("yammer_token"),localStorage.setItem("yammer_token",e.access_token.token)):n.setUserProfileProperty(e.access_token.token).then(function(){localStorage.removeItem("yammer_token"),localStorage.setItem("yammer_token",e.access_token.token),console.log("Yammer -> setAuthToken finished (new token)")})}))})}}).component("yammerLogin",{controller:n})},function(e,t){"use strict";var n=angular.module("compassionIntranet");n.factory("common",["COM_CONFIG",function(e){return{existsInArray:function e(t,n){if(null===t||null===n)return!1;var t=_.find(n,function(e){return e.id==t.id});return null!=t},existsIdInArray:function e(t,n){if(null===t||null===n)return!1;var r=_.find(n,function(e){return e.id==t});return null!=r},getUrlParamByName:function e(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=RegExp("[\\?&]"+t+"=([^&#]*)"),r=n.exec(location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))},isUrl:function e(t){var n=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return n.test(t)},checkForClearStatement:function e(t,n){"true"==this.getUrlParamByName(t)&&localStorage.removeItem(n)},createGuid:function e(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}}}])},function(e,t){"use strict";$pnp.setup({defaultCachingStore:"local",defaultCachingTimeoutSeconds:600,globalCacheDisable:!1});var n=angular.module("compassionIntranet");"compassion.sharepoint.com"===document.location.host?document.location.pathname.toLowerCase().indexOf("/sites/stage")!==-1?n.constant("COM_CONFIG",{isProduction:!0,msGraph:{appId:"287d9b56-5352-4f58-a8f5-1de40966c6c9",redirectUri:"https://compassion.sharepoint.com/sites/stage",interactionMode:"popUp",graphEndpoint:"https://graph.microsoft.com/v1.0/me",graphScopes:["user.read.all"]},yammer:{appId:"",network:"us.ci.org",defaultGroupId:"12856760"},termSets:{locationTermId:"88ed9770-2805-4c59-be2e-d8775b5aedb5",globalPartnersTermId:"22689db7-16ba-423e-89fc-ebeab7b74484",newsTypeTermId:"b1e0d71d-4c58-4860-bacd-5189e63002be",eventTypeTermId:"90087864-74f2-425a-ad5d-2d288990a066",employeeLifeTermId:"ab34a76b-0cf8-441f-af98-677c3dd2961a",usEmployeeLifeTermId:"4ede5c1c-acfd-406e-88bd-0d279bc4535c",globalEmployeeLifeTermId:"0a678df8-43b8-452c-8d13-f4f058828569"},terms:{anniversaryTermId:"43516337-9f0c-4756-9f0e-702229d5041f",retirementTermId:"a4e24f75-5797-4048-affe-da0c6d4e148a"},pictureUrl:"/_layouts/15/userphoto.aspx?size=L&accountname=",useCaching:!1,rootWeb:"https://compassion.sharepoint.com/sites/stage",newsWeb:"https://compassion.sharepoint.com/sites/stage/news",searchWeb:"https://compassion.sharepoint.com/sites/stage-search/pages/results.aspx",rssProxyUrl:"https://api.rss2json.com/v1/api.json?rss_url=",locationByIPUrl:"https://ipinfo.io/json",locationByLatLongUrl:"https://maps.googleapis.com/maps/api/geocode/json?latlng=",workResourceSearchUrl:"https://compassion.sharepoint.com/sites/stage/Pages/Work-Resource-Search.aspx",delveProfileUrl:"https://compassion-my.sharepoint.com/_layouts/15/me.aspx?v=profile&p=",delveSearchUrlPrefix:"https://nam.delve.office.com/?q=",delveSearchUrlSuffix:"&searchpage=1&searchview=people&v=search",lists:{rssFeedsListTitle:"RSS Feeds",userRssFeedsListTitle:"User RSS Feeds",userApps:"User Tools",toolbarApps:"Toolbar Tools",userBookmarks:"User Bookmarks",groupInfo:"Group Info",groupLeadership:"Contacts",navigation:"Navigation",userInfo:"User Information List",globalPartners:"Global Partners",missionPhotos:"Mission Photos",gratitudes:"Gratitudes",anniversary:"Anniversary and Retirement",newHire:"New Hires",resourceLinks:"Resource Links",employeeAnnouncements:"Employee Announcements",workResources:"Work Resources",contacts:"Contacts"},groupSites:["https://compassion.sharepoint.com/sites/stage-cfo","https://compassion.sharepoint.com/sites/stage-gco","https://compassion.sharepoint.com/sites/stage-glo","https://compassion.sharepoint.com/sites/stage-gme","https://compassion.sharepoint.com/sites/stage-gp","https://compassion.sharepoint.com/sites/stage-hr","https://compassion.sharepoint.com/sites/stage-innovation"],storage:[{service:"appService",key:"CI_USER_APP_KEY",expire:24,clearCommand:"clearMyApps"},{service:"bookmarkService",key:"CI_MY_BOOKMARKS_KEY",expire:24,clearCommand:"clearMyBookmarks"},{service:"employeeAnnouncementService",key:"CI_EMPLOYEE_ANNOUNCEMENT_KEY",expire:8,clearCommand:"clearEmployeeAnnouncements"},{service:"globalPartnerService",key:"CI_GLOBAL_PARTNER_KEY",expire:0,clearCommand:"clearGlobalPartners"},{service:"gratitudesService",key:"CI_GRATITUDE_KEY",expire:4,clearCommand:"clearGratitudes"},{service:"groupService",key:"CI_GROUPS_KEY",expire:24,clearCommand:"clearGroups"},{service:"navigationService",key:"CI_NAVIGATION_KEY",expire:0,clearCommand:"clearNavNodes"},{service:"photoService",key:"CI_INTRANET_PHOTOS",expire:24,clearCommand:"clearPhotos"},{service:"weatherService",key:"CI_LOCATION_KEY",expire:4,clearCommand:"clearLocation"},{service:"weatherService",key:"CI_WEATHER_KEY",expire:2,clearCommand:"clearWeather"}],contentTypeIds:{newsPage:"0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF390064DEA0F50FC8C147B0B6EA0636C4A7D400391165E9D2147C40AB7727C9F70AF24301",event:"0x010200AA13DE23CACF40448F3C9C777ABC2106"}}):n.constant("COM_CONFIG",{isProduction:!0,msGraph:{appId:"287d9b56-5352-4f58-a8f5-1de40966c6c9 ",redirectUri:"https://teganwilson.sharepoint.com/",interactionMode:"popUp",graphEndpoint:"https://graph.microsoft.com/v1.0/me",graphScopes:["user.read.all"]},yammer:{appId:"",network:"us.ci.org",defaultGroupId:"12856760"},termSets:{locationTermId:"88af2a94-722d-4ad6-b76c-fe48da0ff12b",globalPartnersTermId:"98d929e9-f2f1-4362-918d-5dc6057db698",newsTypeTermId:"1cdb9059-cf5a-4eb8-8f05-8f1adc569a58",eventTypeTermId:"26b7c488-a617-49b4-b0b4-5a0d55856272",employeeLifeTermId:"5d20985a-9659-4e17-9fa9-35e4a962f24d",globalEmployeeLifeTermId:"508f854b-7244-44cd-8119-7abb2131bb10"},terms:{anniversaryTermId:"43516337-9f0c-4756-9f0e-702229d5041f",retirementTermId:"a4e24f75-5797-4048-affe-da0c6d4e148a"},useCaching:!1,pictureUrl:"/_layouts/15/userphoto.aspx?size=S&accountname=",rootWeb:"https://compassion.sharepoint.com",searchWeb:"https://compassion.sharepoint.com/sites/search/pages/results.aspx",rssProxyUrl:"https://api.rss2json.com/v1/api.json?rss_url=",locationByIPUrl:"https://ipinfo.io/json",locationByLatLongUrl:"https://maps.googleapis.com/maps/api/geocode/json?latlng=",workResourceSearchUrl:"https://compassion.sharepoint.com/sites/stage/Pages/Work-Resource-Search.aspx",delveProfileUrl:"https://compassion-my.sharepoint.com/_layouts/15/me.aspx?v=profile&p=",delveSearchUrlPrefix:"https://nam.delve.office.com/?q=",delveSearchUrlSuffix:"&searchpage=1&searchview=people&v=search",lists:{rssFeedsListTitle:"RSS Feeds",userRssFeedsListTitle:"User RSS Feeds",userApps:"User Tools",toolbarApps:"Toolbar Tools",userBookmarks:"User Bookmarks",groupInfo:"Group Info",groupLeadership:"Contacts",navigation:"Navigation",userInfo:"User Information List",globalPartners:"Global Partners",missionPhotos:"Mission Photos",gratitudes:"Gratitudes",anniversary:"Anniversary and Retirement",newHire:"New Hires",resourceLinks:"Resource Links",employeeAnnouncements:"Employee Announcements",workResources:"Work Resources",contacts:"Contacts"},groupSites:["https://compassion.sharepoint.com/sites/cfo","https://compassion.sharepoint.com/site/gco","https://compassion.sharepoint.com/sites/glo","https://compassion.sharepoint.com/sites/gme","https://compassion.sharepoint.com/sites/gp","https://compassion.sharepoint.com/sites/hr","https://compassion.sharepoint.com/sites/innovation"],storage:[{service:"appService",key:"CI_USER_APP_KEY",expire:24,clearCommand:"clearMyApps"},{service:"bookmarkService",key:"CI_MY_BOOKMARKS_KEY",expire:24,clearCommand:"clearMyBookmarks"},{service:"employeeAnnouncementService",key:"CI_EMPLOYEE_ANNOUNCEMENT_KEY",expire:8,clearCommand:"clearEmployeeAnnouncements"},{service:"globalPartnerService",key:"CI_GLOBAL_PARTNER_KEY",expire:0,clearCommand:"clearGlobalPartners"},{service:"gratitudesService",key:"CI_GRATITUDE_KEY",expire:4,clearCommand:"clearGratitudes"},{service:"groupService",key:"CI_GROUPS_KEY",expire:24,clearCommand:"clearGroups"},{service:"navigationService",key:"CI_NAVIGATION_KEY",expire:0,clearCommand:"clearNavNodes"},{service:"photoService",key:"CI_INTRANET_PHOTOS",expire:24,clearCommand:"clearPhotos"},{service:"weatherService",key:"CI_LOCATION_KEY",expire:4,clearCommand:"clearLocation"},{service:"weatherService",key:"CI_WEATHER_KEY",expire:2,clearCommand:"clearWeather"}],contentTypeIds:{newsPage:"0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF390064DEA0F50FC8C147B0B6EA0636C4A7D400391165E9D2147C40AB7727C9F70AF24301",event:"0x010200AA13DE23CACF40448F3C9C777ABC2106"}}):n.constant("COM_CONFIG",{isProduction:!0,msGraph:{appId:"bc64af36-7263-4bab-8828-c25a37185bb3",redirectUri:"https://teganwilson.sharepoint.com/sites/compassion",interactionMode:"popUp",graphEndpoint:"https://graph.microsoft.com/v1.0/me",graphScopes:["user.read.all"]},yammer:{appId:"",network:"us.ci.org",defaultGroupId:"12856760"},termSets:{locationTermId:"88ed9770-2805-4c59-be2e-d8775b5aedb5",globalPartnersTermId:"22689db7-16ba-423e-89fc-ebeab7b74484",newsTypeTermId:"b1e0d71d-4c58-4860-bacd-5189e63002be",eventTypeTermId:"90087864-74f2-425a-ad5d-2d288990a066",employeeLifeTermId:"ab34a76b-0cf8-441f-af98-677c3dd2961a",anniversaryTermId:"43516337-9f0c-4756-9f0e-702229d5041f",retirementTermId:"a4e24f75-5797-4048-affe-da0c6d4e148a"},terms:{anniversaryTermId:"43516337-9f0c-4756-9f0e-702229d5041f",retirementTermId:"a4e24f75-5797-4048-affe-da0c6d4e148a"},useCaching:!1,pictureUrl:"/_layouts/15/userphoto.aspx?size=S&accountname=",rootWeb:"https://teganwilson.sharepoint.com/sites/compassion",searchWeb:"https://compassion.sharepoint.com/sites/search/pages/results.aspx",rssProxyUrl:"https://api.rss2json.com/v1/api.json?rss_url=",locationByIPUrl:"https://ipinfo.io/json",locationByLatLongUrl:"https://maps.googleapis.com/maps/api/geocode/json?latlng=",workResourceSearchUrl:"https://compassion.sharepoint.com/sites/stage/Pages/Work-Resource-Search.aspx",delveProfileUrl:"https://compassion-my.sharepoint.com/_layouts/15/me.aspx?v=profile&p=",delveSearchUrlPrefix:"https://nam.delve.office.com/?q=",delveSearchUrlSuffix:"&searchpage=1&searchview=people&v=search",lists:{rssFeedsListTitle:"RSS Feeds",userRssFeedsListTitle:"User RSS Feeds",userApps:"User Tools",toolbarApps:"Toolbar Tools",userBookmarks:"User Bookmarks",groupInfo:"Group Info",groupLeadership:"Contacts",navigation:"Navigation",userInfo:"User Information List",globalPartners:"Global Partners",missionPhotos:"Mission Photos",gratitudes:"Gratitudes",anniversary:"Anniversary and Retirement",newHire:"New Hires",resourceLinks:"Resource Links",employeeAnnouncements:"Employee Announcements",workResources:"Work Resources",contacts:"Contacts"},groupSites:["https://compassion.sharepoint.com/sites/stage-cfo","https://compassion.sharepoint.com/site/stage-gco","https://compassion.sharepoint.com/sites/stage-glo","https://compassion.sharepoint.com/sites/stage-gme","https://compassion.sharepoint.com/sites/stage-gp","https://compassion.sharepoint.com/sites/stage-hr","https://compassion.sharepoint.com/sites/stage-innovation"],storage:[{service:"appService",key:"CI_USER_APP_KEY",expire:24,clearCommand:"clearMyApps"},{service:"bookmarkService",key:"CI_MY_BOOKMARKS_KEY",expire:24,clearCommand:"clearMyBookmarks"},{service:"employeeAnnouncementService",key:"CI_EMPLOYEE_ANNOUNCEMENT_KEY",expire:8,clearCommand:"clearEmployeeAnnouncements"},{service:"globalPartnerService",key:"CI_GLOBAL_PARTNER_KEY",expire:0,clearCommand:"clearGlobalPartners"},{service:"gratitudesService",key:"CI_GRATITUDE_KEY",expire:4,clearCommand:"clearGratitudes"},{service:"groupService",key:"CI_GROUPS_KEY",expire:24,clearCommand:"clearGroups"},{service:"navigationService",key:"CI_NAVIGATION_KEY",expire:0,clearCommand:"clearNavNodes"},{service:"photoService",key:"CI_INTRANET_PHOTOS",expire:24,clearCommand:"clearPhotos"},{service:"weatherService",key:"CI_LOCATION_KEY",expire:4,clearCommand:"clearLocation"},{service:"weatherService",key:"CI_WEATHER_KEY",expire:2,clearCommand:"clearWeather"}],contentTypeIds:{newsPage:"0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF390064DEA0F50FC8C147B0B6EA0636C4A7D400391165E9D2147C40AB7727C9F70AF24301",event:"0x010200AA13DE23CACF40448F3C9C777ABC2106"}})},function(e,t){"use strict";!function(){function e(e){return{link:function t(n,r,o){function a(){$(r).show(),$(r).addClass("modal-open")}function s(){$(r).hide(),$(r).removeClass("modal-open")}if(!o.id)return void console.error("modal must have an id");$(r).appendTo("body"),$(r).on("click",function(e){var t=$(e.target);t.closest(".modal-body").length||n.$evalAsync(s)});var i={id:o.id,open:a,close:s};e.Add(i),n.$on("$destroy",function(){e.Remove(o.id),$(r).remove()})}}}angular.module("compassionIntranet").directive("modal",e)}()},function(e,t){"use strict";var n=angular.module("compassionIntranet"),r="uiHelper",o="ci-user-first-name",a="ci-greeting";n.controller(r,["$scope","storage","COM_CONFIG",function(e,t,n){function r(){var e=!b.isToolbarOpen;e?t.set(g,e):t.set(g,e),b.isToolbarOpen=e}function s(){var e=window.navigator.userAgent,t=e.indexOf("MSIE");if(t>0)var n=window.innerWidth;else var n=$(window).width();991>n?768>n?(v=!0,f=!1,h=!1):f=!0:(v=!1,f=!1,h=!0),i()}function i(){setTimeout(function(){},2e3)}function l(e){$("#"+o).text(e),$("#"+a).text(d())}function c(e){var t=e.split(" ");return t.length>0?t[0]:""}function d(){var e=(new Date).getHours();switch(n.isProduction||console.log("current hour",e),!0){case e>=0&&12>e:return"Good Morning";case e>=12&&17>e:return"Good Afternoon";case e>=17&&24>=e:return"Good Evening"}}function u(e){var t=e.split(" ");return t.length>1?t[1]:""}var p=_spPageContextInfo.userDisplayName,m=(_spPageContextInfo.userId,c(p)),g=(u(p),"toolbarStatus"),v="",f="",h="",b=this;e.init=function(){b.isToolbarOpen=null!=t.get(g)&&t.get(g),l(m),$(window).resize(s),s(),window.lowBandwidth&&$("body").addClass("low-bandwidth")},b.setToolbarStatus=r}])},function(e,t){"use strict";angular.module("compassionIntranet").service("anniversaryService",["$http","$q","userProfileService","COM_CONFIG","common",function(e,t,n,r,o){var a=this;ES6Promise.polyfill(),a.getAnniversary=function(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.anniversary).items.select("StartDate","COM_Contact/FirstName","COM_Contact/LastName","COM_Contact/SipAddress","*").expand("COM_Contact").get().then(function(t){for(var n=[],o=t,a=0;o.length>a;a++){var s=o[a],i={},l=null==s.COM_Contact.FirstName?"":s.COM_Contact.FirstName,c=null==s.COM_Contact.LastName?"":s.COM_Contact.LastName,d=moment().diff(s.StartDate,"years");i.startDate=moment(s.StartDate).format("MMMM DD, YYYY"),i.eventType=s.COM_EventType.TermGuid==r.terms.anniversaryTermId?"anniversary":"retirement",i.description="retirement"==i.eventType?i.eventType:d+" year anniversary",i.targetPicUrl=r.pictureUrl+s.COM_Contact.SipAddress,i.targetName=l+" "+c,n.push(i)}e.resolve(n)}),e.promise}}])},function(e,t){"use strict";var n="appService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(e){var n=t.defer(),a=o.get(h);if(null==a&&(a={},a.isExpired=!0),a.isExpired){var s=new $pnp.Web(r.rootWeb);s.lists.getByTitle(r.lists.userApps).items.filter("COM_ToolbarUser eq '"+e+"'").get().then(function(e){for(var r=[],a=0;e.length>a;a++){var s=l(e[a]);r.push(s)}t.all(r).then(function(e){e=g(e),o.set(h,e,0),n.resolve(e)})})}else n.resolve(a);return n.promise}function i(e){var n=t.defer(),a=o.get(h);if(null==a&&(a={},a.isExpired=!0),a.isExpired){var s=new $pnp.Web(r.rootWeb);s.lists.getByTitle(r.lists.userApps).items.select("COM_ToolbarUser/SipAddress","Title","COM_UserToolbarId","COM_ListSortOrder","ID").filter("COM_ToolbarUser/SipAddress eq '"+e+"'").expand("COM_ToolbarUser").get().then(function(e){for(var r=[],a=0;e.length>a;a++){var s=l(e[a]);r.push(s)}t.all(r).then(function(e){e=g(e),o.set(h,e,0),n.resolve(e)})})}else n.resolve(a);return n.promise}function l(e){var n=t.defer();return c(e.COM_UserToolbarId).then(function(t){t.appId=t.id,t.id=e.Id,t.sortOrder=e.COM_ListSortOrder,n.resolve(t)}),n.promise}function c(e){var n=t.defer(),o=new $pnp.Web(r.rootWeb);return o.lists.getByTitle(r.lists.toolbarApps).items.getById(e).get().then(function(e){var t=null==e.COM_ToolbarIconUrl?"":e.COM_ToolbarIconUrl.Url,r={};r.id=e.Id,r.title=e.Title,r.url=e.COM_ToolbarUrl.Url,r.iconUrl=t+(t.indexOf("?")!=-1?"&":"?")+"RenditionId=6",r.sortOrder=e.COM_ListSortOrder,n.resolve(r)}),n.promise}function d(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.toolbarApps).items.get().then(function(t){for(var n=[],r=0;t.length>r;r++){var o=t[r],a={};a.id=o.Id,a.title=o.Title,a.url=o.COM_ToolbarUrl.Url,a.iconUrl=o.COM_ToolbarIconUrl.Url,a.sortOrder=o.COM_ListSortOrder,n.push(a)}e.resolve(n)}),e.promise}function u(e,n){var o=t.defer(),a=new $pnp.Web(r.rootWeb);return a.lists.getByTitle(r.lists.userApps).items.add({COM_ToolbarUserId:e,COM_UserToolbarId:n}).then(function(e){o.resolve(e.Id)}),o.promise}function p(e){var n=t.defer();new $pnp.Web(r.rootWeb);return $pnp.sp.web.lists.getByTitle(r.lists.userApps).items.getById(e.id).update({COM_ListSortOrder:e.sortOrder}).then(function(e){n.resolve(e)}),n.promise}function m(e){var n=t.defer(),o=new $pnp.Web(r.rootWeb);return o.lists.getByTitle(r.lists.userApps).items.getById(e).delete().then(function(e){n.resolve(!0)}),n.promise}function g(e){for(var t=_.findIndex(e,function(e){return null==e.sortOrder})!=-1,n=0;e.length>n;n++){var r=e[n];null==r.sortOrder?(t=!0,e[n].sortOrder=n+1):t&&(e[n].sortOrder=n+1)}var o=_.sortBy(e,"sortOrder");if(null==o||0==o.length)return o;if(1!=o[0].sortOrder)for(var n=0;o.length>n;n++)o[n].sortOrder=n+1;return o}var v=this,f=_.find(r.storage,function(e){return e.service==n}),h=f.key;v.expirationDuration=f.expire,a.checkForClearStatement(f.clearCommand,h),ES6Promise.polyfill(),v.getMyApps=function(e){var n=t.defer();return s(e).then(function(e){n.resolve(e)}),n.promise},v.getMyAppsByName=function(e){var n=t.defer();return i(e).then(function(e){n.resolve(e)}),n.promise},v.getAllApps=function(){var e=t.defer();return d().then(function(t){e.resolve(t)}),e.promise},v.addMyApp=function(e,n){var r=t.defer();return u(e,n).then(function(e){o.remove(h),r.resolve(e)}),r.promise},v.updateUserApp=function(e){var n=t.defer();return p(e).then(function(e){o.remove(h),n.resolve(e)}),n.promise},v.removeMyApp=function(e){var n=t.defer();return m(e).then(function(e){o.remove(h),n.resolve(e)}),n.promise}}])},function(e,t){"use strict";var n="bookmarkService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(e){var n=t.defer(),a=o.get(g);if(null==a&&(a={},a.isExpired=!0),a.isExpired){var s=new $pnp.Web(r.rootWeb);s.lists.getByTitle(r.lists.userBookmarks).items.filter("COM_ToolbarUser eq '"+e+"'").get().then(function(e){n.resolve(e)})}else n.resolve(a);return n.promise}function i(e){var n=t.defer(),a=o.get(g);if(null==a&&(a={},a.isExpired=!0),a.isExpired){var s=new $pnp.Web(r.rootWeb);s.lists.getByTitle(r.lists.userBookmarks).items.select("Id","COM_ToolbarUser/SipAddress","Title","COM_BookmarkUrl","COM_ListSortOrder").filter("COM_ToolbarUser/SipAddress eq '"+e+"'").expand("COM_ToolbarUser").get().then(function(e){e.map(function(e){e.Title&&(e.title=e.Title),e.COM_BookmarkUrl&&(e.url=e.COM_BookmarkUrl)}),r.isProduction||console.log("getUserBookmarkItemsByName",e),n.resolve(e)})}else n.resolve(a);return n.promise}function l(e,n,o,a){var s=t.defer();if(null==a){var i=new $pnp.Web(r.rootWeb);i.lists.getByTitle(r.lists.userBookmarks).items.add({COM_ToolbarUserId:e,COM_BookmarkUrl:o,Title:n}).then(function(e){var t={};t.id=e.data.Id,t.title=e.data.Title,t.url=e.data.COM_BookmarkUrl,t.userId=e.data.COM_ToolbarUserId,s.resolve(t)})}else c(n,a).then(function(t){var n=new $pnp.Web(r.rootWeb);n.lists.getByTitle(r.lists.userBookmarks).items.add({COM_ToolbarUserId:e,COM_BookmarkUrl:o,Title:t.Title}).then(function(e){var t={};t.id=e.data.Id,t.title=e.data.Title,t.url=e.data.COM_BookmarkUrl,t.userId=e.data.COM_ToolbarUserId,s.resolve(t)})});return s.promise}function c(e,n){var r=t.defer(),o=new $pnp.Web(n);return o.lists.getByTitle("Pages").items.select("Title").getById(e).get().then(function(e){r.resolve(e)}),r.promise}function d(e){var n=t.defer();new $pnp.Web(r.rootWeb);return $pnp.sp.web.lists.getByTitle(r.lists.userBookmarks).items.getById(e.id).update({COM_ToolbarUserId:e.userId,COM_BookmarkUrl:e.url,Title:e.title}).then(function(e){n.resolve(e)}),n.promise}function u(e){var n=t.defer(),o=new $pnp.Web(r.rootWeb);return o.lists.getByTitle(r.lists.userBookmarks).items.getById(e).delete().then(function(e){n.resolve(!0)}),n.promise}var p=this,m=_.find(r.storage,function(e){return e.service==n}),g=m.key;a.checkForClearStatement(m.clearCommand,g),ES6Promise.polyfill(),p.expirationDuration=m.expire,p.getMyBookmarks=function(e){var n=t.defer();return s(e).then(function(e){for(var t=[],r=0;e.length>r;r++){var o=e[r],a={};a.id=o.Id,a.title=o.Title,a.url=o.COM_BookmarkUrl,a.userId=o.COM_ToolbarUserId,t.push(a)}n.resolve(t)}),n.promise},p.getMyBookmarksByName=function(e){var n=t.defer();return i(e).then(function(e){for(var t=[],r=0;e.length>r;r++){var o=e[r],a={};a.id=o.Id,a.title=o.Title,a.url=o.COM_BookmarkUrl,a.userId=o.COM_ToolbarUserId,t.push(a)}n.resolve(t)}),n.promise},p.addMyBookmark=function(e,n,r,a){var s=t.defer();return l(e,n,r,a).then(function(e){o.remove(g),s.resolve(e)}),s.promise},p.updateUserBookmark=function(e){var n=t.defer();return d(e).then(function(e){o.remove(g),n.resolve(e)}),n.promise},p.removeMyBookmark=function(e){var n=t.defer();return u(e).then(function(e){o.remove(g),n.resolve(e)}),n.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("contactService",["$http","$q","COM_CONFIG","common","storage",function(e,t,n,r,o){var a=this,s=n.delveProfileUrl,i="/_layouts/15/userphoto.aspx?size=S&accountname=";ES6Promise.polyfill(),a.getContacts=function(e){var r=t.defer(),o=new $pnp.Web(e);return o.lists.getByTitle(n.lists.contacts).items.select("Id","JobTitle","Email","COM_Contact/SipAddress","COM_Contact/FirstName","COM_Contact/LastName").expand("COM_Contact").get().then(function(e){for(var t=e,o=[],a=0;t.length>a;a++){var l=t[a],c={};c.id=l.Id,c.name=l.COM_Contact.FirstName+" "+l.COM_Contact.LastName,c.title=l.JobTitle,c.email=l.Email,c.picUrl=_spPageContextInfo.siteAbsoluteUrl+i+l.COM_Contact.SipAddress,c.profileUrl=s+l.COM_Contact.SipAddress,o.push(c)}n.isProduction||console.log("getContacts",o),r.resolve(o)}),r.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("departmentNewsService",function(e,t,n,r){var o=function e(t){return t=t.substring(t.indexOf("src=")+5),t=t.substring(0,t.indexOf('" '))},a=function e(t){var n=t.RefinableString100;if(n&&(t.img=o(n)),t.RefinableString101&&(t.background=t.RefinableString101.toLowerCase()+"-gradient"),t.RefinableDate01){var r=new Date(t.RefinableDate01);t.articleDate=moment(r).format("MMMM DD, YYYY")}if(t.RefinableDate03){t.OutlookEndDate=new Date(t.RefinableDate03);var a=new Date(t.RefinableDate03);a=moment.utc(a).utcOffset("-10:00"),t.endTime=moment(a).format("h:mm a");var s=new Date(t.RefinableDate03);t.eventEnd=moment(s).format("MMMM DD, YYYY")}if(t.RefinableDate00){t.OutlookStartDate=new Date(t.RefinableDate00);var i=new Date(t.RefinableDate00);i=moment.utc(i).utcOffset("-10:00"),t.startTime=moment(i).format("h:mm a");var l=new Date(t.RefinableDate00);t.eventStart=moment(l).format("MMMM DD, YYYY")}return t},s=function e(t){var n;switch(t){case"Business Technology":n="/bu/bt";break;case"Marketing":n="/bu/marketing";break;case"CB":n="/bu/consumerbanking";break;case"Corporate Communications":n="/bu/corporatecommunications";break;case"Corporate Risk Management":n="/bu/crm";break;case"ETIM":n="/bu/etim";break;case"Risk Management":n="/bu/crm";break;case"CSCM":n="/bu/cscm";break;case"Finance":n="/bu/finance";break;case"Human Resources":n="/bu/humanresources";break;case"Internal Audit":n="/bu/internalaudit";break;case"Law":n="/bu/law";break;case"Legal":n="/bu/law";case"Payment Services":n="/bu/paymentservices";break;case"Diners Club":n="/bu/paymentservices/dci"}var o=r.rootWeb+n;return o},i=function t(){var r=e.defer();return n.getUserDepartment().then(function(e){var t=s(e),n=moment().format("YYYY-MM-DD"),o=moment(n).add(14,"days").format("YYYY-MM-DD"),i=moment(n).subtract(14,"days").format("YYYY-MM-DD"),l=" Path:"+t+"/pages",c=" ContentTypeId:0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF3900242457EFB8B24247815D688C526CD44D0025030FFA21BB6146AC471A3ECDC9638D*",d=" ContentTypeId:0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF3900242457EFB8B24247815D688C526CD44D0017899C3E9B390F4E9BD82B8F03AFD6E6*",u=" RefinableDate00>="+n+" AND RefinableDate00<"+o+" ",p=" RefinableDate01>"+i+" AND RefinableDate01<="+n+" ";$pnp.sp.search({Querytext:""+p+"OR"+u+d+c+" "+l,SelectProperties:["RefinableString104","RefinableString103","RefinableDate00","RefinableDate01","RefinableDate03","RefinableString14","RefinableString15","RefinableString09","RefinableString100","RefinableString13","Path","Title","ListItemID","ArticleByLineOWSTEXT","ContentType"],TrimDuplicates:"false",RowLimit:3,SortList:[{Property:"RefinableDate01",Direction:"1"}]}).then(function(n){"legal"===e.toLowerCase()&&(e="Law");var o={userDepartment:e,departmentLink:t,results:n.PrimarySearchResults};o.results.map(a),r.resolve(o)})}),r.promise};this.getNews=function(){return i()}})},function(e,t){"use strict";angular.module("compassionIntranet").service("documentService",["$http","$q","COM_CONFIG",function(e,t,n){function r(e){var r=t.defer();return $pnp.sp.search({Querytext:'Author: "'+e+'" OR ModifiedBy: "'+e+'"',RowLimit:10,EnableInterleaving:!0,RefinementFilters:['fileExtension:equals("txt")'],SelectProperties:["Title","FileDirRef","EncodedAbsUrl","Author","ModifiedBy"]}).then(function(e){r.resolve(e),n.isProduction||console.log("getMyDocuments",e)}),r.promise}this.getMyDocuments=function(e){var n=t.defer();return r(e).then(function(e){n.resolve(e)}),n.promise}}])},function(e,t){"use strict";var n="employeeAnnouncementService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(){var e=t.defer(),n=new $pnp.Web(r.rootWeb),o=moment().format("YYYY-MM-DD")+"T00:00:00Z";return n.lists.getByTitle(r.lists.employeeAnnouncements).items.filter("COM_PublishDate le '"+o+"' and COM_ExpirationDate gt '"+o+"'").get().then(function(t){t.map(function(e){e.Title&&(e.title=e.Title),e.COM_AnnoucementText&&(e.message=e.COM_AnnoucementText),e.COM_ToolbarIconUrl&&(e.iconUrl=e.COM_ToolbarIconUrl)}),r.isProduction||console.log("employee announcement",t),e.resolve(t)}),e.promise}var i=this,l=_.find(r.storage,function(e){return e.service==n}),c=l.key;a.checkForClearStatement(l.clearCommand,c),ES6Promise.polyfill(),i.getAnnouncements=s}])},function(e,t){"use strict";var n="globalPartnerService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(){var e=t.defer(),n=o.get(c);if(null==n&&(n={},n.isExpired=!0),n.isExpired){var a=new $pnp.Web(r.rootWeb);a.lists.getByTitle(r.lists.globalPartners).items.get().then(function(t){for(var n=t,r=[],o=0;n.length>o;o++){var a=n[o],s={};s.title=a.Title,s.iconUrl=null!=a.COM_ToolbarIconUrl?a.COM_ToolbarIconUrl.Url:"",s.siteUrl=null!=a.COM_LinkUrl?a.COM_LinkUrl.Url:"",r.push(s)}e.resolve(r)})}else e.resolve(n);return e.promise}var i=this,l=_.find(r.storage,function(e){return e.service==n}),c=l.key;a.checkForClearStatement(l.clearCommand,c),ES6Promise.polyfill(),i.expirationDuration=l.expire,i.getGlobalPartners=function(){var e=t.defer();return s().then(function(t){e.resolve(t)}),e.promise}}])},function(e,t){"use strict";!function(){angular.module("compassionIntranet").service("graphService",["$http","$q","COM_CONFIG","common",function(e,t,n,r){function o(e){var t=new Msal.UserAgentApplication(e,null,function(e,t,n,r){});
return t}function a(){return 0!==l.getAllUsers().length}function s(){}function i(){for(var e=[],t={displayName:"Mock Data",group:"Mock Department",title:"Mock Director",location:"Mock Location, CO",phone:"555-555-5555",userPrincipalName:"stonkin@us.ci.org",picUrl:"/_layouts/15/userphoto.aspx?size=S&accountname=stonkin@us.ci.org",logo:n.rootWeb+"/_catalogs/masterpage/Compassion/images/shape.png"},o=0;17>o;o++){var a=angular.copy(t);a.displayName=t.displayName+" "+o,a.userPrincipalName=t.userPrincipalName+o,a.id=r.createGuid(),e.push(a)}return e}var l,c=this,d="https://graph.microsoft.com/beta/me/people";l=o(n.msGraph.appId),l.redirectUri=n.msGraph.redirectUri,c.isAuthenticated=a,c.getMyPeople=function(){try{var r=t.defer();c.isAuthenticated()||s();var o="Bearer "+localStorage.token,a={method:"GET",url:d,headers:{"Access-Control-Allow-Origin":!0,"Access-Control-Allow-Credentials":!0,Authorization:o}};return e(a).then(function(e){for(var t=e.data.value,o=[],a=0;t.length>a;a++){var s=t[a],i={displayName:s.displayName,group:s.department,title:s.title,location:s.officeLocation,phone:s.phones.length>0?s.phones[0].number:"",userPrincipalName:s.userPrincipalName,picUrl:"/_layouts/15/userphoto.aspx?size=S&accountname="+s.userPrincipalName,logo:n.rootWeb+"/_catalogs/masterpage/Compassion/images/shape.png"};o.push(i)}r.resolve(o)}).catch(function(e){if(n.isProduction)r.reject(e);else{var t=i();r.resolve(t)}}),r.promise}catch(e){console.log(e)}},c.searchMyUsers=function(r){var o=t.defer();c.isAuthenticated()||s();var a="Bearer "+localStorage.token,i={method:"GET",url:d+"?$search="+r,headers:{"Access-Control-Allow-Origin":!0,"Access-Control-Allow-Credentials":!0,Authorization:a}};return e(i).then(function(e){for(var t=e.data.value,r=[],a=0;t.length>a;a++){var s=t[a],i={displayName:s.displayName,group:s.department,title:s.title,location:s.officeLocation,phone:s.phones.length>0?s.phones[0].number:"",userPrincipalName:s.userPrincipalName,picUrl:"/_layouts/15/userphoto.aspx?size=S&accountname="+s.userPrincipalName,logo:n.rootWeb+"/_catalogs/masterpage/Compassion/images/shape.png"};r.push(i)}o.resolve(r)}).catch(function(e){o.reject(e),n.isProduction||console.log("search my users",JSON.stringify(e))}),o.promise}}])}()},function(e,t){"use strict";var n="gratitudesService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","common","userProfileService",function(e,t,r,o,a){var s=this,i=_.find(r.storage,function(e){return e.service==n}),l=i.key;o.checkForClearStatement(i.clearCommand,l),ES6Promise.polyfill(),s.getGratitudes=function(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.gratitudes).items.select("COM_GratitudeType","COM__x0020_GratitudeDescription","COM_Contact/FirstName","COM_Contact/LastName","COM_Contact/SipAddress","Author/SipAddress","Author/FirstName","Author/LastName").expand("COM_Contact","Author").get().then(function(t){r.isProduction||console.log("getGratitudes",t);for(var n=[],o=t,a=0;o.length>a;a++){var s=o[a],i=null==s.COM_Contact.FirstName?"":s.COM_Contact.FirstName,l=null==s.COM_Contact.LastName?"":s.COM_Contact.LastName,c=null==s.Author.FirstName?"":s.Author.FirstName,d=null==s.Author.LastName?"":s.Author.LastName,u={};u.type=s.COM_GratitudeType,u.description=s.COM__x0020_GratitudeDescription.substring(0,175),u.targetPicUrl=r.pictureUrl+s.COM_Contact.SipAddress,u.targetName=i+" "+l,u.submittedBy=c+" "+d,n.push(u)}e.resolve(n)}),e.promise}}])},function(e,t){"use strict";var n="groupService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","common","storage",function(e,t,r,o,a){function s(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.groupInfo).items.get().then(function(n){for(var r=[],o=[],s=n,l=0;s.length>l;l++){var c=s[l],u={};u.id=c.Id,u.name=c.Title,u.url=c.COM_GroupSiteUrl.Url,u.description=c.COM_GroupDescription,u.profileUrl="",r.push(u),o.push(i(u.url,c.Id))}try{t.all(o).then(function(t){for(var n=0;r.length>n;n++){var o=r[n].id;r[n].leaders=_.find(t,function(e){return e.groupId==o}).leaders}a.set(d,r,0),e.resolve(r)})}catch(t){e.resolve(r)}}),e.promise}function i(e,n){var o=t.defer(),a="/_layouts/15/userphoto.aspx?size=S&username=",s=new $pnp.Web(e);return s.lists.getByTitle(r.lists.groupLeadership).items.select("Title","COM_Contact/Title","COM_Contact/UserName","COM_Contact/JobTitle").expand("COM_Contact").get().then(function(e){var t=[],r={};r.groupId=n;for(var s=e,i=0;s.length>i;i++){var l=s[i],c=l.COM_Contact,d={};d.name=c.Title,d.title=c.JobTitle,d.picUrl=_spPageContextInfo.siteAbsoluteUrl+a+c.UserName,t.push(d)}r.leaders=t,o.resolve(r)}),o.promise}var l=this,c=_.find(r.storage,function(e){return e.service==n}),d=c.key;o.checkForClearStatement(c.clearCommand,d),ES6Promise.polyfill(),l.expirationDuration=c.expire,l.getGroups=function(){var e=t.defer(),n=a.get(d);return null==n&&(n={},n.isExpired=!0),e.resolve(n.isExpired?s():n),e.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("howDoIService",["$http","$q","COM_CONFIG","common","storage",function(e,t,n,r,o){var a=this;ES6Promise.polyfill(),a.gethowDoI=function(){var e=t.defer(),r=new $pnp.Web(n.rootWeb);return r.lists.getByTitle(n.lists.workResources).items.filter("COM_ResourceType eq 'How Do I'").get().then(function(t){t.map(function(e){e.COM_LinkUrl&&(e.url=e.COM_LinkUrl.Url),e.COM_ToolbarIconUrl&&(e.iconUrl=e.COM_ToolbarIconUrl),e.Title&&(e.title=e.Title)}),n.isProduction||console.log("how do I",t),e.resolve(t)}),e.promise}}])},function(e,t){"use strict";function n(){function e(e){o.push(e)}function t(e){var t=_.findWhere(o,{id:e});o=_.without(o,t)}function n(e){var t=_.findWhere(o,{id:e});t.open()}function r(e){var t=_.findWhere(o,{id:e});t.close()}var o=[],a={};return a.Add=e,a.Remove=t,a.Open=n,a.Close=r,a}angular.module("compassionIntranet").factory("modalService",n)},function(e,t){"use strict";var n="navigationService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","common","storage",function(e,t,r,o,a){function s(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.navigation).items.get().then(function(t){for(var n=[],r=0;t.length>r;r++){var o={},s=t[r];o.url=s.COM_NavNodeUrl.Url,o.title=s.Title,n.push(o)}a.set(c,n,0),e.resolve(n)}),e.promise}var i=this,l=_.find(r.storage,function(e){return e.service==n}),c=l.key;o.checkForClearStatement(l.clearCommand,c),ES6Promise.polyfill(),i.expirationDuration=l.expire,i.getAllNodes=function(){var e=t.defer(),n=a.get(c);return null==n&&(n={},n.isExpired=!0),e.resolve(n.isExpired?s():n),e.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("newHireService",["$http","$q","userProfileService","COM_CONFIG","common",function(e,t,n,r,o){var a=this;ES6Promise.polyfill(),a.getHire=function(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.newHire).items.select("StartDate","COM_Contact/FirstName","COM_Contact/LastName","COM_Contact/SipAddress").expand("COM_Contact").get().then(function(t){for(var n=[],o=t,a=0;o.length>a;a++){var s=o[a],i={},l=null==s.COM_Contact.FirstName?"":s.COM_Contact.FirstName,c=null==s.COM_Contact.LastName?"":s.COM_Contact.LastName;i.startDate=moment(s.StartDate).format("MMMM DD, YYYY"),i.targetPicUrl=r.pictureUrl+s.SipAddress,i.targetName=l+" "+c,n.push(i)}e.resolve(n)}),e.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("newsService",["$q","$http","COM_CONFIG",function(e,t,n){function r(t){var r=e.defer();return $pnp.sp.search({Querytext:"Path:"+n.newsWeb+" AND ContentTypeId:"+n.contentTypeIds.newsPage+"*"+(null==t?"":" AND "+t),SelectProperties:["ContentType12","Path","PublishingImage","SiteTitle","Title","ListItemID","RefinableDate00","RefinableString00","RefinableString01","RefinableString02","RefinableString04"],TrimDuplicates:!1,RowLimit:100,SortList:[{Property:"RefinableDate01",Direction:"1"}]}).then(function(e){e.PrimarySearchResults.map(function(e){if(e.PublishingImage&&(e.ImageUrl=o(e.PublishingImage)+"?RenditionId=1"),e.RefinableDate00){var t=new Date(e.RefinableDate00);e.ArticleDate=moment(t).format("MMMM D, YYYY"),e.RawArticleDate=t}e.RefinableString00&&(e.LocationTag=e.RefinableString00),e.RefinableString01&&(e.NewsType=e.RefinableString01),e.RefinableString02&&(e.EventType=e.RefinableString02),e.RefinableString04&&(e.Group=e.RefinableString04)});var t=_.sortBy(e.PrimarySearchResults,"RawArticleDate");n.isProduction||console.log("news",t),r.resolve(t.reverse())}),r.promise}function o(e){var t=$(e).attr("src");return t.indexOf("?")!=-1&&(t=t.substring(0,t.indexOf("?"))),t}function a(t){var r=e.defer();return $pnp.sp.search({Querytext:"Path:"+n.newsWeb+" AND ContentTypeId:"+n.contentTypeIds.event+"*"+(null==t?"":" AND "+t),SelectProperties:["Path","Title","Location","RefinableDate00","RefinableDate01","RefinableDate02","RefinableString00","RefinableString01","RefinableString02"],TrimDuplicates:!1,RowLimit:100,SortList:[{Property:"RefinableDate01",Direction:"1"}]}).then(function(e){e.PrimarySearchResults.map(function(e){if(e.PublishingImage&&(e.ImageUrl=o(e.PublishingImage)+"?RenditionId=1"),e.RefinableDate01){var t=new Date(e.RefinableDate01);e.RawEventDate=t,e.EventDate=moment(t).format("MMMM D, YYYY"),e.StartTime=moment(t).format("h:mm a")}if(e.RefinableDate02){var n=new Date(e.RefinableDate02);e.EndTime=moment(n).format("h:mm a")}e.RefinableString00&&(e.LocationTag=e.RefinableString00),e.RefinableString01&&(e.NewsType=e.RefinableString01),e.RefinableString02&&(e.EventType=e.RefinableString02)}),r.resolve(e.PrimarySearchResults)}),r.promise}var s=this;s.getNews=r,s.getEvents=a,ES6Promise.polyfill()}])},function(e,t){"use strict";angular.module("compassionIntranet").service("pagerService",function(){function e(e,t,n){t=t||1,n=n||10;var r,o,a=Math.ceil(e/n);a>10?t>6?a>t+4?(r=t-5,o=t+4):(r=a-9,o=a):(r=1,o=10):(r=1,o=a);var s=(t-1)*n,i=Math.min(s+n-1,e-1),l=_.range(r,o+1);return{totalItems:e,currentPage:t,pageSize:n,totalPages:a,startPage:r,endPage:o,startIndex:s,endIndex:i,pages:l}}var t=this;t.getPager=e})},function(e,t){"use strict";var n="photoService";angular.module("compassionIntranet").service(n,["$http","$q","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(){var e=t.defer(),n=new $pnp.Web(r.rootWeb);return n.lists.getByTitle(r.lists.missionPhotos).items.select("COM_PhotoCaption","EncodedAbsUrl","Created").orderBy("Created",!1).top(4).get().then(function(t){for(var n=[],o=0;t.length>o;o++){var a=t[o],s={};s.description=a.COM_PhotoCaption,s.source=a.EncodedAbsUrl+(a.EncodedAbsUrl.indexOf("?")!=-1?"&":"?")+"RenditionId=5",s.created=new moment(a.Created),n.push(s)}r.isProduction||console.log("photo shares",n),e.resolve(n)}).catch(function(e){console.error(e)}),e.promise}var i=this,l=_.find(r.storage,function(e){return e.service==n}),c=l.key;a.checkForClearStatement(l.clearCommand,c),ES6Promise.polyfill(),i.expirationDuration=l.expire,i.getPhotos=s}])},function(e,t){"use strict";var n=angular.module("compassionIntranet");n.service("relatedDocService",function(e,t,n){this.getData=function(){var t=e.defer();return getPage().then(function(e){depNews(e).then(function(e){t.resolve(e)})}),t.promise}})},function(e,t){"use strict";var n=angular.module("compassionIntranet");n.service("relatedNewsService",function(e,t,n){function r(t,r,a){var s=e.defer();return $pnp.sp.search({Querytext:"ContentTypeId:"+n.contentTypeIds.newsPage+"*",SelectProperties:["PublishingImage","Id","RefinableString01","RefinableString00","RefinableDate00","RefinableDate01","RefinableDate02","Path","Title","ArticleByLineOWSTEXT","ContentType"],RefinementFilters:['RefinableString01:equals("Country Office")'],RowLimit:null==a?3:a,TrimDuplicates:!1,SortList:[{Property:"RefinableDate01",Direction:"1"}]}).then(function(e){var t=e.PrimarySearchResults;t=t.filter(function(e){if(r!=e.Path)return e}),t.map(function(e){if(e.PublishingImage&&(e.ImageUrl=o(e.PublishingImage)+"?RenditionId=1"),e.RefinableDate00){var t=new Date(e.RefinableDate00);e.rawArticleDate=t,e.articleDate=moment(t).format("MMMM D, YYYY")}e.RefinableString01&&(e.newsType=e.RefinableString01)}),n.isProduction||console.log("getRelatedNews",t),s.resolve(t)}),s.promise}function o(e){var t=$(e).attr("src");return t.indexOf("?")!=-1&&(t=t.substring(0,t.indexOf("?"))),t}var a=this;a.getRelatedNews=r;var s=function t(r){var a="",s="",i=r.ContentType;i.indexOf("News Page")>0&&(a=" ContentTypeId:"+n.contentTypeIds.newsPage+"* ",r.newsType&&(s=" RefinableString01: '"+r.newsType+"'"));var l=" Path:"+_spPageContextInfo.siteAbsoluteUrl+"/news",c=e.defer();return $pnp.sp.search({Querytext:""+a+"AND"+s+" "+l,SelectProperties:["PublishingImage","RefinableString01","RefinableString00","RefinableDate00","RefinableDate01","RefinableDate02","Path","Title","ArticleByLineOWSTEXT","ContentType"],TrimDuplicates:"false",RowLimit:3,SortList:[{Property:"RefinableDate01",Direction:"1"}]}).then(function(e){var t=e.PrimarySearchResults;t=t.filter(function(e){var t=r.Title;if(t!=e.Title)return e}),item.map(function(e){if(e.PublishingImage&&(e.ImageUrl=o(e.PublishingImage)+"?RenditionId=1"),e.RefinableDate01){var t=new Date(e.RefinableDate01);e.rawArticleDate=t,e.articleDate=moment(t).format("MMMM D, YYYY")}e.RefinableString01&&(e.newsType=e.RefinableString01)}),c.resolve(t)}),c.promise},i=function t(){var r=e.defer(),o=_spPageContextInfo.pageItemId,a=new $pnp.Web(n.newsWeb);return a.lists.getByTitle("Pages").items.getById(o).get().then(function(e){e.map(function(e){if(e.RefinableString01&&(e.newsType=e.RefinableString01),e.RefinableDate00){var t=new Date(e.RefinableDate00);e.articleDate=moment(t).format("MMMM D, YYYY"),e.rawArticleDate=t}}),n.isProduction||console.log("get page",e),r.resolve(e.length>0?e.PrimarySearchResults[0]:null)}),r.promise};a.getData=function(){var t=e.defer();return i().then(function(e){s(e).then(function(e){t.resolve(e)})}),t.promise}})},function(e,t){"use strict";angular.module("compassionIntranet").service("resourceLinksService",["$http","$q","COM_CONFIG","common","storage",function(e,t,n,r,o){var a=this;ES6Promise.polyfill(),a.getresourceLinks=function(){var e=t.defer(),r=new $pnp.Web(n.rootWeb);return r.lists.getByTitle(n.lists.workResources).items.filter("COM_ResourceType eq 'Resource'").get().then(function(t){t.map(function(e){e.COM_LinkUrl&&(e.url=e.COM_LinkUrl.Url),e.COM_ToolbarIconUrl&&(e.iconUrl=e.COM_ToolbarIconUrl.Url),e.Title&&(e.title=e.Title)}),n.isProduction||console.log("getRelatedNews",items),n.isProduction||console.log("resource",t),e.resolve(t)}),e.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("rssFeedService",["$http","$q","COM_CONFIG",function(e,t,n){function r(e){var r=t.defer(),a=new $pnp.Web(n.rootWeb);return a.lists.getByTitle(n.lists.userRssFeedsListTitle).items.filter("COM_RssFeedUserId eq '"+e+"'").get().then(function(e){for(var n=[],a=0;e.length>a;a++){var s=o(e[a]);n.push(s)}t.all(n).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)})}),r.promise}function o(e){if(e.COM_RssFeedId>=0){var r=t.defer(),o=new $pnp.Web(n.rootWeb);return o.lists.getByTitle(n.lists.rssFeedsListTitle).items.getById(e.COM_RssFeedId).get().then(function(t){var n={};n.title=t.Title,n.url=t.COM_RssFeedUrl.Url,n.feedId=t.Id,n.id=e.Id,r.resolve(n)}).catch(function(e){r.reject(e),console.log(e)}),r.promise}}function a(){var e=t.defer(),r=new $pnp.Web(n.rootWeb);return r.lists.getByTitle(n.lists.rssFeedsListTitle).items.get().then(function(t){for(var n=[],r=0;t.length>r;r++){var o=t[r],a={};a.id=o.Id,a.title=o.Title,a.url=o.COM_RssFeedUrl.Url,n.push(a)}e.resolve(n)}).catch(function(e){console.error(e)}),e.promise}function s(e){for(var n=t.defer(),r=[],o=0;e.length>o;o++){var a=i(e[o]);r.push(a)}return t.all(r).then(function(e){n.resolve(e)}),n.promise}function i(r){var o=t.defer();if(null!=r)return e.jsonp(n.rssProxyUrl+encodeURIComponent(r.url)).then(function(e){e.data?"error"==e.data.status&&console.log("RSS fetch error: "+e.data.message+", RSS URL: "+r.url):console.error("Unable to fetch RSS feed from provided URL. Please check the URL.");for(var t=_.sortBy(e.data.items,function(e){return e.pubDate}).reverse(),n=0;t.length>n;++n){var a=t[n];a.feedId=r.feedId,a.feedTitle=r.title,a.id=r.id,a.pDate=""==a.pubDate||null==a.pubDate?"":moment().utc(a.pubDate),""!=a.pDate&&null!=a.pDate&&(a.publishedDate=moment(a.pubDate),a.publishedSpanString=l(a.pubDate)),a.currentTime=moment.utc().format(),a.guid.startsWith("http")&&(a.link=a.guid)}o.resolve(t)}),o.promise}function l(e){var t=moment.utc().diff(moment.utc(e)),n=moment.duration(t),r={};if(r.hour=n.asHours(),r.hourFormat=Math.floor(n.asHours()),r.minute=moment.utc(t).format("m"),r.hour>0){var o=Math.floor(r.hour);return o+"h"}return"0"==r.minute?"":r.minute+"m"}function c(e){var r=t.defer(),o=new $pnp.Web(n.rootWeb);return o.lists.getByTitle(n.lists.userRssFeedsListTitle).items.getById(e).delete().then(function(e){r.resolve(!0)}),r.promise}function d(e,r){var o=t.defer(),a=new $pnp.Web(n.rootWeb);return a.lists.getByTitle(n.lists.userRssFeedsListTitle).items.add({COM_RssFeedUserId:e,COM_RssFeedId:r}).then(function(e){o.resolve(e)}),o.promise}this.getMyRssFeeds=function(e,n){var o=t.defer();return r(e).then(function(e){s(e).then(function(e){var t=[];n=null==n?5:n;for(var r=0;e.length>r;r++)if(null!=e[r]&&0!=e[r].length){var a={};a.title=e[r][0].feedTitle,a.feedId=e[r][0].feedId,a.id=e[r][0].id,a.articles=e[r].slice(0,n),t.push(a)}o.resolve(t)})}),o.promise},this.getAllRssFeeds=function(){var e=t.defer();return a().then(function(t){e.resolve(t)}),e.promise},this.addMyFeed=function(e,n){var r=t.defer();return d(e,n).then(function(e){r.resolve(e.data.Id)}),r.promise},this.removeMyFeed=function(e){var n=t.defer();return c(e).then(function(e){n.resolve(e)}),n.promise}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("spService",["$http","$q","COM_CONFIG","storage","common",function(e,t,n,r,o){function a(e){var r=t.defer();return $pnp.sp.search({Querytext:"path:"+e+"/*",TrimDuplicates:!1,RowLimit:100,RefinementFilters:['contentclass:equals("STS_Web")']}).then(function(e){e.PrimarySearchResults.map(function(e){if(e.PublishingImage&&(e.ImageUrl=getImage(e.PublishingImage)+"?RenditionId=1"),e.RefinableDate00){var t=new Date(e.RefinableDate00);e.ArticleDate=moment(t).format("MMMM D, YYYY")}e.RefinableString00&&(e.LocationTag=e.RefinableString00),e.RefinableString01&&(e.NewsType=e.RefinableString01),e.RefinableString02&&(e.EventType=e.RefinableString02)}),n.isProduction||console.log("service sites",e.PrimarySearchResults),r.resolve(e.PrimarySearchResults)}),r.promise}var s=this,i="CI_PROJECT_SITE_LIST";o.checkForClearStatement("clearSiteKey",i),ES6Promise.polyfill(),s.getMySites=a}])},function(e,t){"use strict";angular.module("compassionIntranet").service("storage",["common",function(e){function t(e,t,n,r){var o;"v"!=e&&(e=e,o=0===n?0:moment().add(n,"hours"));try{n?"session"==r?$pnp.storage.session.put(e,t,o):$pnp.storage.local.put(e,t,o):"session"==r?$pnp.storage.session.put(e,t):$pnp.storage.local.put(e,t)}catch(t){throw Error("Storage set error for key: "+e)}}function n(e,t){try{var n;return n="session"==t?$pnp.storage.session.get(e):$pnp.storage.local.get(e)}catch(t){throw Error("Storage get error for key: "+e)}return null}function r(e){$pnp.storage.local.delete(e),$pnp.storage.session.delete(e)}function o(){localStorage.clear()}var a=3;return n("v")!==a&&(localStorage.clear(),t("v",a)),{get:n,set:t,remove:r,clearAll:o}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("taxonomyService",["COM_CONFIG",function(e){function t(e,t,n,r){var o=e.getTermSet(t),a=o.getAllTerms();r.load(a,"Include(Id,IsAvailableForTagging,CustomSortOrder,Name,PathOfTerm,LocalCustomProperties)"),r.executeQueryAsync(Function.createDelegate(this,function(e,t){n(a)}),Function.createDelegate(this,function(e,t){console.log(t)}))}function n(e,n){SP.SOD.loadMultiple(["sp.js"],function(){SP.SOD.registerSod("sp.taxonomy.js",SP.Utilities.Utility.getLayoutsPageUrl("sp.taxonomy.js")),SP.SOD.loadMultiple(["sp.taxonomy.js"],function(){var r=SP.ClientContext.get_current(),o=SP.Taxonomy.TaxonomySession.getTaxonomySession(r),a=null,s=!1;s?(a=o.getDefaultSiteCollectionTermStore(),t(a,e,n,r)):(a=o.getDefaultSiteCollectionTermStore(),t(a,e,n,r))})})}function r(e,t,r){n(e,function(e){for(var n=e.getEnumerator(),a={term:e,Nodes:[]};n.moveNext();)for(var s=n.get_current(),i=s.get_pathOfTerm().split(";"),l=a.Nodes,c=0;i.length>c;c++){for(var d=!1,u=0;l.length>u;u++)if(l[u].name===i[c]){d=!0;break}var p=d?l[u]:{name:i[c],Nodes:[]};c===i.length-1&&(p.term=s,p.Value=s.get_name().replace("＆","&"),p.Key=p.Value,p.NodeGuid=""+s.get_id(),p.IsAvailableForTagging=s.get_isAvailableForTagging(),p.NewWindow=null,p.Url=null,p.IsValidLink=!1,p.IsPopular=!1,p.CustomProperties=s.get_objectData().get_properties().LocalCustomProperties),d?l=p.Nodes:(l.push(p),c!==i.length-1&&(l=p.Nodes))}if(a=o(a),a.Nodes.length>0&&null!=t&&""!=t){for(var m=a.Nodes[0],c=0;m.Nodes.length>c;c++)m.Nodes[c].NodeGuid==t&&r(m.Nodes[c]);r(null)}else r(a)})}function o(e){if(e.Nodes.length&&e.term.get_customSortOrder){var t=null;e.term.get_customSortOrder()&&(t=e.term.get_customSortOrder()),t?(t=t.split(":"),e.Nodes.sort(function(e,n){var r=t.indexOf(e.NodeGuid),o=t.indexOf(n.NodeGuid);return r>o?1:o>r?-1:0})):e.Nodes.sort(function(e,t){return e.Value>t.Value?1:t.Value>e.Value?-1:0})}for(var n=0;e.Nodes.length>n;n++)e.Nodes[n]=o(e.Nodes[n]);return e}this.getTermFromMasterTermsetByGuid=function(e){var t=jQuery.Deferred();return r(e,"",function(e){t.resolve(null!=e?e.Nodes:null)}),t.promise()}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("userProfileService",["$http","$q","COM_CONFIG",function(e,t,n){function r(e){var r=t.defer(),o=new $pnp.Web(n.rootWeb);return o.lists.getByTitle(n.lists.userInfo).items.filter("Department eq '"+e+"'").get().then(function(e){r.resolve(e)}),r.promise}function o(e){var r=t.defer(),o=new $pnp.Web(n.rootWeb);return o.lists.getByTitle(n.lists.userInfo).items.getById(e).get().then(function(e){r.resolve(e)}),r.promise}function a(){var e=t.defer();return $pnp.sp.profiles.myProperties.get().then(function(t){e.resolve(t)}),e.promise}function s(){var e="i:0#.f|membership|"+_spPageContextInfo.userLoginName;return $pnp.sp.profiles.getUserProfilePropertyFor(e,"SPS-Location")}function i(){var e="i:0#.f|membership|"+_spPageContextInfo.userLoginName;return $pnp.sp.profiles.getUserProfilePropertyFor(e,"Department")}function l(e){for(var t=[],n=0;e.length>n;n++)t.push($pnp.sp.profiles.getPropertiesFor("i:0#.f|membership|"+e[n]));return Promise.all(t)}return{getUserProfile:l,getUserLocation:s,getCurrentUserProfile:a,getUserDepartment:i,getUsersInMyDepartment:r,getUserFromUserInfo:o}}])},function(e,t){"use strict";var n="weatherService";angular.module("compassionIntranet").service(n,["$q","$http","COM_CONFIG","storage","common",function(e,t,r,o,a){function s(e){var t;return"Heavy Snow"==e||"Snow"==e||"Snow Showers"==e?t="wi wi-snowflake-cold":("Cloudy"!=e&&"Mostly Cloudy"!=e&&"Partly Cloudy"!=e&&"Mostly Sunny"!=e||(t="wi wi-cloudy"),"Scattered Thunderstorms"==e&&(t="wi wi-storm-showers"),"Scattered Showers"==e&&(t="wi wi-showers"),"Fog"!=e&&"Foggy"!=e&&"Haze"!=e||(t="wi wi-fog"),"Hail"!=e&&"Sleet"!=e||(t="wi wi-hail"),"Severe Thunderstorms"!=e&&"Thuderstorm"!=e&&"Thundershowers"!=e||(t="wi wi-lightening"),"Showers"!=e&&"Rain"!=e&&"Freezing Drizzle"!=e&&"Drizzle"!=e&&"Freezing Rain"!=e&&"Mixed Rain and Hail"!=e||(t="wi wi-raindrops"),"Scattered Snow Showers"!=e&&"Light Snow Shower"!=e||(t="wi wi-snow"),"Snow Flurries"!=e&&"Mixed Rain and Snow"!=e&&"Mixed Rain and Sleet"!=e&&"Mixed Snow and Sleet"!=e||(t="wi wi-rain-mix"),"Isolated Thunderstorms"!=e&&"Isolated Thundershowers"!=e||(t="wi wi-thunderstorm"),"Sunny"==e&&(t="wi wi-day-sunny"),"Windy"!=e&&"Blowing Snow"!=e&&"Breezy"!=e&&"Blustery"!=e||(t="wi wi-strong-wind")),t}var i=this,l=_.where(r.storage,function(e){return e.service==n}),c=_.find(l,function(e){return e.key.indexOf("LOCATION")!=-1}),d=_.find(l,function(e){return e.key.indexOf("WEATHER")!=-1}),u=c.key,p=d.key,m=c.expire,g=d.expire;a.checkForClearStatement(c.clearCommand,u),a.checkForClearStatement(d.clearCommand,p),i.getWeather=function(n,r){var a=e.defer();return t.get("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22"+n+"%22)%20and%20u%3D%22"+r+"%22&&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys").then(function(e,t,n){var i={};i.title=e.data.query.results.channel.item.title,i.temp=e.data.query.results.channel.item.condition.temp,i.text=e.data.query.results.channel.item.condition.text,i.city=e.data.query.results.channel.location.city,i.state=e.data.query.results.channel.location.region,i.description=e.data.query.results.channel.item.condition.text,i.weatherIcon=s(i.description),i.unit=r,o.set(p,i,g),a.resolve(i)},function(e){console.error("Error calling the yahoo weather service",e),a.reject(null)}),a.promise},i.getLocationFromIpAddress=function(n){if(null!=o.get(u))return o.get(u);var a=e.defer(),s=r.locationByIPUrl;return t.get(s).then(function(e,t,n){o.set(u,e,m),a.resolve(e)},function(e){console.error("Error calling the ip / location service",e),a.reject(e)}),a.promise},i.getLocationFromLatLong=function(n,a){var s=e.defer(),i=r.locationByLatLongUrl+n+","+a;return t.get(i).then(function(e,t,n){var a=_.filter(e.data.results,function(e){return _.contains(e.types,"locality")});0==a.length?(r.isProduction||console.log("getLocationFromLatLong Error: ",e),s.resolve("Colorado Springs, CO")):(o.set(u,a[0].formatted_address,m),s.resolve(a[0].formatted_address))},function(e){console.error("Error calling the ip / location service",e),s.reject(e)}),s.promise},i.getIpAddress=function(){var t=e.defer();return $.get("https://ipinfo.io/json",function(e){t.resolve(e)}),t.promise},i.getLocationFromService=function(){var t=e.defer();return $.get(r.locationByIPUrl,function(e){t.resolve(e)}),t.promise},i.getLocation=function(){var t=e.defer();if(null!=o.get(u))t.resolve(o.get(u));else if(navigator.geolocation)try{v().then(function(e){var n=e.coords.latitude,r=e.coords.longitude;i.getLocationFromLatLong(n,r).then(function(e){t.resolve(e)})}).catch(function(e){i.getLocationFromService().then(function(e){t.resolve(e.city+", "+e.region)})})}catch(e){i.getLocationFromService().then(function(e){t.resolve(e.city+", "+e.region)})}else i.getLocationFromService().then(function(e){t.resolve(e.city+", "+e.region)});return t.promise};var v=function e(t){return new Promise(function(e,n){navigator.geolocation.getCurrentPosition(e,n,t)})}}])},function(e,t){"use strict";angular.module("compassionIntranet").service("yammerApiService",function(e,t,n,r){var o=this;o.authToken=null,o.requestQueue={items:[],slowRequests:!1},o.numOfRequests=0,o.newObject=function(e){var t=[],n=void 0;return e.forEach(function(e){n={Path:e.Path,SiteTitle:e.SiteTitle,Title:e.Title,Modified:new Date(e.Write)},t.push(n)}),t},o.ensureConnection=function(){var t=e.defer();return null!==yam?yam.getLoginStatus(function(e){if(e.authResponse)yam.platform.setAuthToken(e.access_token.token),t.resolve();else{console.log("Not logged in. Pulling token from User Profile");var n="i:0#.f|membership|"+_spPageContextInfo.userLoginName;$pnp.sp.profiles.getUserProfilePropertyFor(n).then(function(e){e&&(localStorage.removeItem("yammer_token"),localStorage.setItem("yammer_token",e),yam.platform.setAuthToken(e,function(e){})),t.resolve()},function(e){console.log("Could not retrieve token from User Profile.  Error data",e),t.reject(e)})}}):(console.log("Yam undefined"),t.reject()),t.promise},o.getOpenGraphObjectFull=function(t){var n=e.defer(),r=this,o="messages/open_graph_objects/"+t+".json",a=function t(){var n=e.defer();return r.queueThrottledRequest({url:o,method:"GET",data:{},success:function e(t){n.resolve(t)},error:function e(t){console.log("Error in getOpenGraphObjectFull",t)}}),n.promise},s=$pnp.storage.local,i=$pnp.util.dateAdd(new Date,"minute",5);return s.getOrPut("yammer_cache/"+o,a,i).then(function(e){n.resolve(e)}),n.promise},o.getOpenGraphObjectRecursive=function(t,n,r){var o=e.defer(),a=this;return a.getOpenGraphObject(t,n).then(function(e){if(e.messages.length>0){r.push(e.messages);var n=e.messages[e.messages.length-1];a.getOpenGraphObjectRecursive(t,n.id,r).then(function(e){o.resolve(r)})}else o.resolve(r)}),o.promise},o.getOpenGraphObject=function(t,n){var r=e.defer(),o=this,a="";null!=n&&(a="&older_than="+n);var s="messages/open_graph_objects/"+t+".json?threaded=extended"+a,i=function t(){var n=e.defer(),r={url:s,method:"GET",data:{},success:function e(t){n.resolve(t)},error:function e(t){console.log("getOpenGraphObject",t),n.reject(t)}};return o.queueThrottledRequest(r),n.promise};$pnp.storage.local,$pnp.util.dateAdd(new Date,"minute",5);return i().then(function(e){r.resolve(e)}),r.promise},o.getOpenGraphItemByUrl=function(t){var n=e.defer(),r=this,o="open_graph_objects.json",a=function r(){var a=e.defer();return yam.platform.request({url:o,method:"GET",data:{url:t},success:function e(t){a.resolve(t)},error:function e(t){404==t.status?a.resolve(null):(console.warn(t),n.reject(t))}}),a.promise};$pnp.storage.local,$pnp.util.dateAdd(new Date,"minute",5);return r.ensureConnection().then(function(e){a().then(function(e){n.resolve(e)})}),n.promise},o.queueThrottledRequest=function(e){document.location.href.toLocaleLowerCase()===r.rootWeb||document.location.href.toLocaleLowerCase()===r.rootWeb+"/"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/pages/default.aspx"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/news/pages/default.aspx"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/news/"?this.requestQueue.items.push(e):yam.platform.request(e)},o.processThrottledRequests=function(){var e,n=this;document.location.href.toLocaleLowerCase()===r.rootWeb||document.location.href.toLocaleLowerCase()===r.rootWeb+"/"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/pages/default.aspx"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/news/pages/default.aspx"||document.location.href.toLocaleLowerCase()===r.rootWeb+"/news/"?(e=300,t(function(){if(n.requestQueue.items.length>0){var e=n.requestQueue.items.shift();e&&(console.log("processThrottledRequests: Processing item",e),yam.platform.request(e))}},e)):console.log("Not throttling Yammer requests for this page")},o.getYammerGroupsForUser=function(){var t=e.defer(),n=this;return null!==yam&&n.ensureConnection().then(function(e){yam.platform.request({url:"https://api.yammer.com/api/v1/groups.json?mine=1",method:"GET",data:{},success:function e(n){console.log("Yammer Groups",n);var r=n;r=r.sort(function(e,t){return new Date(e.stats.last_message_at)<new Date(t.stats.last_message_at)}),r=r.slice(0,3),r.map(function(e){e.Modified=new Date(e.stats.last_message_at),e.Modified=69==e.Modified.getYear()?"No Yammer Posts":e.Modified.format("MMMM D, YYYY")}),t.resolve(r)},error:function e(n){console.warn(n),t.reject()}})},function(){console.log("Not logged in. Trying again")}).catch(function(e){console.log("Yammer not logged in."),t.reject(e)}),t.promise},o.getLikeCountForMessage=function(t){var n=e.defer(),r=this;if(null!==yam)try{r.ensureConnection().then(function(e){o.getOpenGraphItemByUrl(t).then(function(e){return null==e?(n.resolve(0),n.promise):void o.getOpenGraphObject(e.id).then(function(e){for(var t=0,r=0;e.messages.length>r;r++){var o=e.messages[r];t+=o.liked_by.count}n.resolve(t)})})})}catch(e){n.resolve(0)}return n.promise},o.getLikesByThreadId=function(e){var t=this,n=$.Deferred(),r="messages/in_thread/"+e+".json?threaded=extended";return t.ensureConnection().then(function(e){yam.platform.request({url:r,method:"GET",data:{},success:function e(t){for(var r=0,o=0;t.messages.length>o;o++){
var a=t.messages[o];r+=a.liked_by.count}n.resolve(r)},error:function e(t){console.log("getLikestByThreadId - no messages."),n.reject()}})}),n.promise()},o.getMessagesForGroup=function(t){var n=e.defer(),r=this;return null!==yam&&r.ensureConnection().then(function(e){yam.platform.request({url:"https://www.yammer.com/api/v1/messages/in_group/"+t+".json",method:"GET",data:{},success:function e(t){console.log("Yammer Groups",t);var r=t;r=r.sort(function(e,t){return new Date(e.stats.last_message_at)<new Date(t.stats.last_message_at)}),r=r.slice(0,3),r.map(function(e){e.Modified=new Date(e.stats.last_message_at),e.Modified=69==e.Modified.getYear()?"No Yammer Posts":e.Modified.format("MMMM D, YYYY")}),n.resolve(r)},error:function e(t){console.warn(t),n.reject()}})},function(){console.log("Not logged in. Trying again")}).catch(function(e){console.log("Yammer not logged in."),n.reject(e)}),n.promise},o.formatUrl=function(e){if(0==e.startsWith("http")){e.endsWith("/")&&(e=e.substring(0,e.length-1)),0==e.startsWith("/")&&(e="/"+e);var t=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n]+)/im,n=location.href,r=n.match(t)[0];e=r+e}return e},o.isGraphObjectCreatedForUrl=function(t,n){var r=e.defer(),o=this;return o.ensureConnection().then(function(e){o.getOpenGraphItemByUrl(t).then(function(e){if(n){var t=e.id;o.getOpenGraphObjectRecursive(t,null,[]).then(function(e){var t={likeCount:0,commentCount:0};if(e.length>0){for(var n=0;e.length>n;n++){var o=e[n];t.commentCount+=o.length}""==e[0][0].body.rich&&(t.commentCount=t.commentCount-1)}else t.commentCount=0;r.resolve(t)})}else r.resolve(e)},function(e){"Not Found"===e.statusText?r.resolve(e.statusText):(console.log("Yammer error",e),r.reject())})},function(e){"Not Found"===e.statusText?r.resolve(e.statusText):(console.log("Yammer error",e),r.reject())}),r.promise},o.createGraphObject=function(t,n,o){var a=e.defer(),s="https://api.yammer.com/api/v1/messages.json";0==angular.isDefined(o)&&(o=r.yammer.defaultGroupId);var i={og_url:t,og_title:n,group_id:o};return yam.platform.request({url:s,method:"POST",data:i,success:function e(t){a.resolve(t)},error:function e(t){a.resolve("Error creating Yammer converstion.  Contact IT Support")}}),a.promise},o.processThrottledRequests()})},function(e,t){e.exports='<section> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="event in events | limitTo:2:0 track by $index"> <div class="media employee-card"> <image-loader image-src={{event.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{event.targetName}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{event.targetName}}</h3> <p>{{event.description}}</p> <span class=submit-line>Start Date: {{event.startDate}}</span> </div> </div> </div> </div> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="event in events | limitTo:2:2 track by $index"> <div class="media employee-card"> <image-loader image-src={{event.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{event.targetName}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{event.targetName}}</h3> <p>{{event.description}}</p> <span class=submit-line>{{event.startDate}}</span> </div> </div> </div> </div> </section>'},function(e,t){e.exports='<div class=bookmark ng-show=!ctrl.isMyBookmark()> <a ng-click=ctrl.addMyBookmark()> <span class="">Bookmark<i class="fa fa-bookmark-o" aria-hidden=true></i></span> </a> </div>'},function(e,t){e.exports='<section class=key-contacts> <div class=row> <div class=col-12 ng-repeat="contact in ctrl.contacts track by $index"> <div class="media employee-card"> <image-loader image-css-class="d-flex align-self-start mr-3 emp-photo" image-src={{contact.picUrl}} image-alt-text={{contact.name}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{contact.name}}</h3> <h5 class=emp-title>{{contact.title}}</h5> <span class=emp-contact> <a href=mailto:{{contact.email}}>Email</a> <span class=emp-view><a ng-href={{contact.profileUrl}} target=_blank>View Profile</a></span> </span> </div> </div> </div> </div> </section>'},function(e,t){e.exports='<div ng-show="news || events" class=row> <div class=col-md-12> <span class=line-title>Latest From {{department}}</span> </div> </div> <div ng-show="news || events" class=corporate-communications> <div class="row flex"> <div ng-show=news ng-repeat="item in news" class="col-md-4 flex"> <div class="tiles image-top" ng-if=item.img> <div class=image-contain> <img ng-src={{item.img}}> </div> <div class=copy-contain> <div class=title-contain> <a href="{{departmentUrl}}#?category={{item.RefinableString15}}"> <span class="story-tag blue" ng-if=item.RefinableString15>{{item.RefinableString15}}</span> </a> <h2><a ng-href={{item.Path}}>{{item.Title}}</a></h2> </div> <div class=date-share> <span class="regular-body numbers">{{item.articleDate}}</span> <card-footer page-url={{item.Path}} item-id={{ListItemID}}></card-footer> </div> </div> </div> <div ng-if=!item.img class="tiles no-image"> <div class=copy-contain> <a href="{{departmentUrl}}#?category={{item.RefinableString15}}"> <span class="story-tag blue" ng-if=item.RefinableString15>{{item.RefinableString15}}</span> </a> <h2><a href={{item.Path}}>{{item.Title}}</a></h2> </div> <div class=date-share> <span class="regular-body numbers">{{item.articleDate}}</span> <card-footer page-url={{item.Path}} item-id={{ListItemID}}></card-footer> </div> </div> </div> <div ng-show=events ng-repeat="item in events" class="col-md-4 flex"> <div class="half tiles event"> <div class=copy-contain> <span class=story-tag ng-if=item.RefinableString14>{{item.RefinableString14}}</span> <h2><a href={{item.Path}}>{{item.Title}}</a></h2> <div class=event-date-time> <span class=event-date> <span class=icon-Calendar></span> <span class="date numbers">{{item.eventStart}}</span> </span> <span class=event-time> <span class=icon-Time></span> <span class="time numbers">{{item.startTime}} - {{item.endTime}} {{event.RefinableString103}}</span> </span> </div> <add-to-outlook-button subject={{item.Title}} body="" start="{{item.OutlookStartDate | date:\'yyyy-MM-ddTHH:mm:ss\'}}" end="{{item.OutlookEndDate | date:\'yyyy-MM-ddTHH:mm:ss\'}}" timezone=UTC location={{item.RefinableString104}}></add-to-outlook-button> </div> </div> </div> </div> <a href={{departmentUrl}} class=view-all>GO TO {{department}}</a> </div>'},function(e,t){e.exports='<section class=employee-announcement ng-if="ctrl.announcements.length > 0"> <div class=row ng-repeat="announcement in ctrl.announcements track by $index"> <div class=col-md-6> <div class="media employee-card announce"> <i class="fa fa-calendar d-flex align-self-start" aria-hidden=true ng-if="announcement.iconUrl == null"></i> <image-loader image-src={{announcement.iconUrl}} image-width=46 image-height=46 ng-if="announcement.iconUrl != null"></image-loader> <div class=media-body> <span class="mt-0 emp-announce">{{announcement.title}}</span> <span class=emp-info>{{announcement.message}}</span> </div> </div> </div> </div> </section>'},function(e,t){e.exports='<section class="people-places news-events"> <ul class="nav nav-tabs"> <li class=nav-item ng-click="toggleActiveTab(\'US\')"> <a class="nav-link alt" ng-class="{active: activeTab == \'US\'}">US</a> </li> <li class=nav-item ng-click="toggleActiveTab(\'Global\')"> <a class="nav-link alt" ng-class="{active: activeTab == \'Global\'}">Global</a> </li> </ul> <div class=ci-people ng-show="activeTab == \'US\'"> <employee-announcement></employee-announcement> <us-links></us-links> </div> <div class=ci-places ng-show="activeTab == \'Global\'"> <global-links></global-links> </div> <input id=ci-pp-activeTab type=hidden ng-model=ctrl.activeTab /> </section> '},function(e,t){e.exports='<section class=employee-spotlight> <div class=container> <div class=row> <h2 class=section>Our People</h2> <div class=employee-spotlight-tabs> <ul class="nav nav-tabs"> <li class=nav-item> <a class=nav-link ng-click="activeTab = \'g\'" ng-class="{active: activeTab == \'g\'}">skippys</a> </li> <li class=nav-item> <a class=nav-link ng-click="activeTab = \'h\'" ng-class="{active: activeTab == \'h\'}">new hires</a> </li> <li class=nav-item> <a class=nav-link ng-click="activeTab = \'a\'" ng-class="{active: activeTab == \'a\'}">anniversaries + retirements</a> </li> </ul> <div class=tab-content> <div ng-show="activeTab == \'g\'"> <gratitudes></gratitudes> </div> <div ng-show="activeTab == \'h\'"> <new-hires></new-hires> </div> <div ng-show="activeTab == \'a\'"> <anniversary-cards></anniversary-cards> </div> </div> <div class="row employee-spotlight-cta" ng-if="activeTab == \'g\'"> <div class=col> <a class="btn btn-block blue" ng-click=submitGratitude()>Submit a Skippy</a> </div> <div class=col> <a class="btn btn-cta pull-right" href={{viewAllUrl}}>View All Skippys</a> </div> </div> <div class="row employee-spotlight-cta" ng-if="activeTab == \'h\'"> <div class=col> <a class="btn btn-cta pull-right" href={{viewAllHiresUrl}}>View All Hires</a> </div> </div> <div class="row employee-spotlight-cta" ng-if="activeTab == \'a\'"> <div class=col> <a class="btn btn-cta pull-right" href={{viewAllAnniversaryUrl}}>View All</a> </div> </div> </div> </div> </div> </section> '},function(e,t){e.exports='<section class="background-off-white find-people" ng-if=!isLowBandwidth> <div class=container> <div class=row> <div class=col> <h2 class=section>Find People + Collaborate</h2> </div> </div> <div class=row> <div class=col-lg-8> <div class="input-group search"> <input id=ci-find-people-search type=text class=form-control placeholder="search a name, title, business unit, department or location" ng-model=ctrl.searchText> <span class=input-group-btn> <button ng-click=ctrl.searchUsers() class="btn btn-input" type=button><i class="fa fa-search"></i></button> </span> </div> </div> </div> <div class=row ng-show=!lowBandwidth> <div class=col-12> <h3>Recommended for You</h3> </div> </div> <div class=row ng-show=!lowBandwidth> <div id=findPeopleCarousel class="find-people-carousel carousel col-12" data-ride=""> <ol class=carousel-indicators> <li data-target=#findPeopleCarousel data-slide-to=0 class=active></li> <li data-target=#findPeopleCarousel data-slide-to=1></li> <li data-target=#findPeopleCarousel data-slide-to=2></li> </ol> <div class=carousel-inner role=listbox> <div class="carousel-item active"> <div class="col-lg-3 col-12 employee-card-wrapper" ng-repeat="person in ctrl.myPeople | limitTo: 4:0 track by person.id"> <div class=employee-card> <img class="align-self-center emp-photo" ng-src={{person.picUrl}} alt={{person.displayName}}> <h3 class=emp-name>{{person.displayName}}</h3> <span class="h5 emp-loc">{{person.group}}</span> <span class="h5 emp-title">{{person.title}}</span> <img class=emp-logo ng-src={{person.logo}}> <hr> <span class=emp-address>{{person.location}}</span> <span class=emp-phone>{{person.phone}}</span> </div> </div> </div> <div ng-if="ctrl.myPeople.length > 4" class=carousel-item> <div class="col-lg-3 col-12 employee-card-wrapper" ng-repeat="person in ctrl.myPeople | limitTo: 4:4 track by person.id"> <div class=employee-card> <img class="align-self-center emp-photo" ng-src={{person.picUrl}} alt={{person.displayName}}> <h3 class=emp-name>{{person.displayName}}</h3> <span class="h5 emp-loc">{{person.group}}</span> <span class="h5 emp-title">{{person.title}}</span> <img class=emp-logo ng-src={{person.logo}}> <hr> <span class=emp-address>{{person.location}}</span> <span class=emp-phone>{{person.phone}}</span> </div> </div> </div> <div ng-if="ctrl.myPeople.length > 8" class=carousel-item> <div class="col-lg-3 col-12 employee-card-wrapper" ng-repeat="person in ctrl.myPeople | limitTo: 4:8 track by person.id"> <div class=employee-card> <img class="align-self-center emp-photo" ng-src={{person.picUrl}} alt={{person.displayName}}> <h3 class=emp-name>{{person.displayName}}</h3> <span class="h5 emp-loc">{{person.group}}</span> <span class="h5 emp-title">{{person.title}}</span> <img class=emp-logo ng-src={{person.logo}}> <hr> <span class=emp-address>{{person.location}}</span> <span class=emp-phone>{{person.phone}}</span> </div> </div> </div> </div> </div> </div> <div class=row> <div class=col-12> <a class="btn btn-cta" href=#>View All</a> </div> </div> </div> </section>'},function(e,t){e.exports='<section class=location-places> <div class=row> <div class=col-lg-6 ng-repeat="group in ctrl.globalGroups track by $index"> <div class=card> <h5>{{group.name}}</h5> <ul> <li ng-repeat="link in group.Nodes track by $index"> <a ng-href=#> {{link.name}} </a> </li> </ul> </div> </div> </div> </section>'},function(e,t){e.exports='<section class=global-partners ng-show=ctrl.toggleVisibility()> <h2 class=section>Global Partners</h2> <ul> <li ng-repeat="partner in ctrl.globalPartners track by $index"> <a ng-href={{partner.siteUrl}}> <img ng-src={{partner.iconUrl}} /> <span>{{partner.title}}</span> </a> </li> </ul> </section>'},function(e,t){e.exports='<section> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="grat in gratitudes | limitTo:2:0 track by $index"> <div class="media employee-card"> <image-loader image-src={{grat.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{grat.targetName}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{grat.targetName}}</h3> <h5 class=emp-rec>{{grat.type}}</h5> <p>{{grat.description}}</p> <span class=submit-line>Submitted by: {{grat.submittedBy}}</span> </div> </div> </div> </div> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="grat in gratitudes | limitTo:2:2 track by $index"> <div class="media employee-card"> <image-loader image-src={{grat.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{grat.targetName}} img-width=48px img-height=48px></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{grat.targetName}}</h3> <h5 class=emp-rec>{{grat.type}}</h5> <p>{{grat.description}}</p> <span class=submit-line>Submitted by: {{grat.submittedBy}}</span> </div> </div> </div> </div> </section> '},function(e,t){e.exports='<div class=row> <div class=col-12> <section id=group-summary class=group-summary> <div id=groupSumAccordion class=group-summary-accordion role=tablist aria-multiselectable=true> <div class=card ng-repeat="group in ctrl.groups track by group.id"> <div class="card-header row" role=tab id=headingOne> <div class=col-sm-8> <a class=toolbar-toggle-button ng-click=ctrl.toggleSummary(group.id)> <i class="fa fa-plus" ng-show=!ctrl.isGroupActive(group.id)></i> <i class="fa fa-minus" ng-show=ctrl.isGroupActive(group.id)></i> <h5 class=mb-0>{{group.name}}</h5> </a> </div> <div class=col-sm-4> <a ng-href={{group.url}}>GO TO GROUP ></a> </div> </div> <div class=ci-group-summary ng-show=ctrl.isGroupActive(group.id)> <div class=card-body> <div class=row> <div class=col-sm-8> <p>{{group.description}}</p> <h5>Leadership</h5> </div> <div class=col-sm-4> <a target=_blank class=nav-button href="https://nam.delve.office.com/?q=GCO&searchpage=1&searchview=people&v=search">VIEW ORG CHART</a> </div> </div> <div class=col-md-6 ng-repeat="leader in group.leaders"> <div class="media employee-card"> <img class="d-flex align-self-start mr-3 emp-photo" ng-src={{leader.picUrl}}> <div class=media-body> <h3 class="mt-0 emp-name">{{leader.name}}</h3> <h5 class=emp-title>{{leader.title}}</h5> </div> </div> </div> </div> </div> <input type=hidden ng-model=group.id /> </div> </div> </section> </div> </div>'},function(e,t){e.exports='<section class=how-do-i> <div class=row> <div class=col-12> <ul class="nav nav-pills nav-fill"> <h3>How Do I?</h3> <li class=nav-item ng-repeat="link in ctrl.howDoI track by $index"> <a class=nav-link href="{{ link.url }}"> <span>{{ link.title }}</span> </a> </li> </ul> </div> </div> </section> '},function(e,t){e.exports='<section class=location-places> <div class=row> <div class=col-lg-6 ng-repeat="place in ctrl.places track by $index"> <div class=card> <h5>{{place.name}}</h5> <ul> <li ng-repeat="country in place.Nodes track by $index"> <a ng-href={{country.siteUrl}} target=_blank> {{country.name}} </a> </li> </ul> </div> </div> </div> </section>'},function(e,t){e.exports='<ul ng-repeat="app in ctrl.myApps track by $index"> <li> <a ng-href="{{ app.url }}" target=_blank> <img ng-src="{{ app.iconUrl }}" class=app-icon /> <div>{{ app.title }}</div> </a> </li> </ul>'},function(e,t){e.exports='<ul ng-repeat="bk in ctrl.myBookmarks track by $index"> <li> <a ng-href="{{ bk.url }}"> <div>{{ bk.title }}</div> </a> </li> </ul> '},function(e,t){e.exports='<section class=my-department ng-show=ctrl.toggleVisibility()> <h2 class=section>My Department</h2> <div class="media employee-card" ng-repeat="person in ctrl.myDepartment track by $index"> <img class="d-flex align-self-start mr-3 emp-photo" ng-src={{person.picUrl}} alt="Employee photo"> <div class=media-body> <h3 class="mt-0 emp-name">{{person.title}}</h3> <h5 class=emp-title>{{person.jobTitle}}</h5> <span class=emp-contact><a ng-href=mailto:{{person.email}}>Email</a> <span class=emp-view><a ng-href={{person.profileUrl}}>View Profile</a></span></span> </div> </div> </section> '},function(e,t){e.exports='<ul> <li ng-repeat="doc in ctrl.myDocuments"> <a ng-href="{{ doc.url }}"> <div>{{ doc.title }}</div> </a> </li> </ul>'},function(e,t){e.exports='<section ng-show=!lowBandwidth> <div class="card world-news" ng-show="ctrl.myFeeds.length == 0"> <div class=card-body> <h2 class=section>World News</h2> <p class=card-text> Save your favorite external news sites for easy access. News headlines will be updated in real-time. </p> <a class="btn btn-block" ng-click="ctrl.showManager = true;">Get Started</a> </div> </div> <rss-feeds ng-show="!ctrl.myFeeds.length == 0"></rss-feeds> <rss-feed-manager ng-show="!ctrl.myFeeds.length == 0"></rss-feed-manager> </section> '},function(e,t){e.exports='<section> <ul ng-repeat="site in ctrl.mySites track by $index"> <li> <a ng-href="{{ site.Path }}"> <div>{{ site.Title }}</div> </a> </li> </ul> </section>'},function(e,t){e.exports='<div class=container> <nav class="navbar navbar-expand-lg"> <a class=navbar-brand ng-href="{{ ctrl.rootSiteUrl }}"><img src=/sites/stage/_catalogs/masterpage/Compassion/images/skippy-white.png /></a> <button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon><i class="fa fa-bars" aria-hidden=true></i> </span> </button> <div class="collapse navbar-collapse" id=navbarContent> <ul class="navbar-nav mr-auto"> <li ng-repeat="node in ctrl.navNodes" class=nav-item> <a ng-href="{{ node.url }}" ng-class="{active: ctrl.activeNavNode(node)}"> <div>{{ node.title }}</div> </a> </li> </ul> <div class="form-inline my-2 my-lg-0"> <div class=search-button> <a ng-click=ctrl.goSearch() class=search-glass> <i class="fa fa-search"></i> </a> <a class=search-close ng-click=ctrl.toggleSearchBox()> <i class="fa fa-search"></i> <span ng-bind=ctrl.searchTitle></span> </a> </div> <div class=search-background style=display:none> <input id=searchQueryTerm type=text value=Search ng-model=searchTerm /> </div> </div> </div> </nav> </div>'},function(e,t){e.exports='<section> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="hire in newHires | limitTo:2:0 track by $index"> <div class="media employee-card"> <image-loader image-src={{hire.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{hire.targetName}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{hire.targetName}}</h3> <span class=submit-line>Start Date: {{hire.startDate}}</span> </div> </div> </div> </div> <div class="row employee-card-container"> <div class="col-md-6 employee-card-wrapper" ng-repeat="hire in newHires | limitTo:2:2 track by $index"> <div class="media employee-card"> <image-loader image-src={{hire.targetPicUrl}} image-css-class="d-flex align-self-start mr-3 emp-photo" image-alt-text={{hire.targetName}}></image-loader> <div class=media-body> <h3 class="mt-0 emp-name">{{hire.targetName}}</h3> <span class=submit-line>Start Date: {{hire.startDate}}</span> </div> </div> </div> </div> </section> '},function(e,t){e.exports='<section class=news-events> <div class=container> <div class=row> <div class=col> <bookmark-page></bookmark-page> </div> </div> <div class=row> <div class=news-events-tabs> <ul class="nav nav-tabs" role=tablist> <li class=nav-item> <a class="nav-link alt" ng-class="{\'active\': ctrl.activeTab == \'news\'}" data-toggle=tab role=tab ng-click="ctrl.activeTab = \'news\'">News</a> </li> <li class=nav-item> <a class="nav-link alt" ng-class="{\'active\': ctrl.activeTab == \'events\'}" data-toggle=tab role=tab ng-click="ctrl.activeTab = \'events\'">Events</a> </li> </ul> <div class=search-filter> <div class=dropdown> <button class="btn btn-block brown dropdown-toggle" type=button id=dropdownMenuButton data-toggle=dropdown aria-haspopup=true aria-expanded=false> {{ selectedCategoryTitle }} </button> <div class=dropdown-menu aria-labelledby=dropdownMenuButton> <a ng-click=ctrl.clearCategory()>Clear Selection</a> <a class=dropdown-item ng-click=ctrl.filterByCategory(category) ng-repeat="category in ctrl.categories">{{category.name}}</a> </div> </div> <div class=dropdown> <button class="btn btn-block brown dropdown-toggle" type=button id=dropdownMenuButton data-toggle=dropdown aria-haspopup=true aria-expanded=false> {{ selectedRegionTitle }} </button> <div class=dropdown-menu aria-labelledby=dropdownMenuButton> <a ng-click=ctrl.clearRegion()>Clear Selection</a> <a class=dropdown-item ng-click=ctrl.filterByRegion(region) ng-repeat="region in ctrl.regions">{{region.name}}</a> </div> </div> <div class="input-group search"> <input type=text placeholder={{searchText}} class=form-control placeholder="Search for..." ng-class="{\'focus\': hasFocus}" ng-focus="hasFocus=true" ng-blur="hasFocus=false" ng-model=searchTerm ng-keypress=ctrl.checkForGoSearch($event)> <span class=input-group-btn> <button class="btn btn-input" ng-click=ctrl.goSearch() ng-model=searchTerm type=button><i class="fa fa-search"></i></button> </span> </div> </div> <div class=row> <div class="col-md-4 ml-md-auto"> <div class="dropdown pull-right sort-filter"> <button class="btn btn-block dropdown-toggle" ng-repeat="sort in ctrl.sortOptions | limitTo: 1:0" type=button id=dropdownMenuButton data-toggle=dropdown aria-haspopup=true aria-expanded=false> Sort by: {{sort.title}} </button> <div id=ci-filter-menu class=dropdown-menu aria-labelledby=dropdownMenuButton> <a class=dropdown-item ng-repeat="sort in ctrl.sortOptions | limitTo: ctrl.sortOptions.length:1" ng-click=ctrl.sortBy(sort) ng-repeat="sortOption in ctrl.sortOptions">{{sort.title}}</a> </div> </div> </div> </div> <div class=tab-content> <div class=active id=news role=tabpanel ng-show="ctrl.activeTab == \'news\'"> <div class=hero-news-container> <div class=card-group ng-repeat="article in ctrl.newsItems"> <div class="card img-card" ng-if="article.ImageUrl != null"> <a ng-href={{article.Path}}> <image-loader image-css-class=img-fluid image-src={{article.ImageUrl}} image-alt-text="" class=ng-isolate-scope></image-loader> </a> </div> <div class=card> <div class=card-body> <h4 class=card-tags ng-show="article.NewsType != null">{{article.NewsType}}</h4> <h4 class=card-tags ng-show="article.Group != null">{{article.Group}}</h4> <h4 class=card-tags ng-show="article.LocationTag != null">{{article.LocationTag}}</h4> <div class=card-date>{{article.ArticleDate}}</div> <div class=card-text><a href={{article.Path}} title="" class=title>{{article.Title}}</a></div> <news-page-likes ng-cloak page-url={{article.Path}}></news-page-likes> </div> </div> </div> </div> <ul ng-if=ctrl.newsPager.pages.length class=pagination> <li class=page-item ng-class="{disabled:ctrl.newsPager.currentPage === 1}"> <a class=page-link ng-click=ctrl.setNewsPage(1)>First</a> </li> <li class=page-item ng-class="{disabled:ctrl.newsPager.currentPage === 1}"> <a class=page-link ng-click="ctrl.setNewsPage(ctrl.newsPager.currentPage - 1)">Previous</a> </li> <li class=page-item ng-repeat="page in ctrl.newsPager.pages" ng-class="{active:ctrl.newsPager.currentPage === page}"> <a class=page-link ng-click=ctrl.setNewsPage(page)>{{page}}</a> </li> <li class=page-item ng-class="{disabled:ctrl.newsPager.currentPage === ctrl.newsPager.totalPages}"> <a class=page-link ng-click="ctrl.setNewsPage(ctrl.newsPager.currentPage + 1)">Next</a> </li> <li class=page-item ng-class="{disabled:ctrl.newsPager.currentPage === ctrl.newsPager.totalPages}"> <a class=page-link ng-click=ctrl.setNewsPage(ctrl.newsPager.totalPages)>Last</a> </li> </ul> </div> <div id=events role=tabpanel ng-show="ctrl.activeTab == \'events\'"> <div class="row news-card-container"> <div class="col-md-6 news-card-wrapper" ng-repeat="event in ctrl.eventItems"> <div class="card upcoming-events"> <div class=card-body> <a onclick="return ShowPopupDialog(GetGotoLinkUrl(this)),!1" href={{event.Path}}><p class=card-text>{{event.Title}}</p></a> <p class=card-date>{{event.EventDate}}</p> <p class=card-time>{{event.StartTime}}-{{event.EndTime}}</p> <p class=card-location>{{event.Location}}</p> <h4 class=card-tags ng-show="event.EventType != null">{{event.EventType}}</h4> <h4 class=card-tags ng-show="event.Group != null">{{event.Group}}</h4> <h4 class=card-tags ng-show="event.LocationTag != null">{{event.LocationTag}}</h4> </div> </div> </div> </div> <ul ng-if=ctrl.eventsPager.pages.length class=pagination> <li class=page-item ng-class="{disabled:ctrl.eventsPager.currentPage === 1}"> <a class=page-link ng-click=ctrl.setEventsPage(1)>First</a> </li> <li class=page-item ng-class="{disabled:ctrl.eventsPager.currentPage === 1}"> <a class=page-link ng-click="ctrl.setEventsPage(ctrl.eventsPager.currentPage - 1)">Previous</a> </li> <li class=page-item ng-repeat="page in ctrl.eventsPager.pages" ng-class="{active:ctrl.eventsPager.currentPage === page}"> <a class=page-link ng-click=ctrl.setEventsPage(page)>{{page}}</a> </li> <li class=page-item ng-class="{disabled:ctrl.eventsPager.currentPage === ctrl.eventsPager.totalPages}"> <a class=page-link ng-click="ctrl.setEventsPage(ctrl.eventsPager.currentPage + 1)">Next</a> </li> <li class=page-item ng-class="{disabled:ctrl.eventsPager.currentPage === ctrl.eventsPager.totalPages}"> <a class=page-link ng-click=ctrl.setEventsPage(ctrl.eventsPager.totalPages)>Last</a> </li> </ul> </div> </div> </div> </div> </div> </section>'},function(e,t){e.exports='<span class=card-likes ng-show="ctrl.likeCount != null"><i class="fa fa-heart-o"></i>{{ctrl.likeCount}}</span>'},function(e,t){e.exports='<section class="people-places news-events"> <ul class="nav nav-tabs"> <li class=nav-item ng-click="ctrl.toggleActiveTab(\'people\')"> <a class="nav-link alt" ng-class="{active: ctrl.activeTab == \'people\'}">People</a> </li> <li class=nav-item ng-click="ctrl.toggleActiveTab(\'places\')"> <a class="nav-link alt" ng-class="{active: ctrl.activeTab == \'places\'}">Places</a> </li> </ul> <div class=ci-people ng-show="ctrl.activeTab == \'people\'"> <find-people></find-people> </div> <div class=ci-places ng-show="ctrl.activeTab == \'places\'"> <h4>Locations by Region</h4> <location-places></location-places> </div> <input id=ci-pp-activeTab type=hidden ng-model=ctrl.activeTab /> </section> '},function(e,t){e.exports='<section class="photo-share stay-connected" ng-if=!isLowBandwidth> <div class=container> <div class=row> <div class=col> <h2 class=section>Compassion Snapshots</h2> <h4>Stay connected with Compassion International</h4> </div> </div> <div class=row> <div class="col-lg-3 col-md-6" ng-repeat="photo in ctrl.photos | limitTo: 4 track by $index"> <div class=photo-container> <img ng-src={{photo.source}} class=img-fluid> <p>{{photo.description}}</p> </div> </div> </div> <div class="row share-buts"> <div class=col-md-3> <a class="btn btn-block blue" ng-click=ctrl.displayNewPhotoForm()>Share your photos</a> </div> <div class=col-md-8> <a class="btn btn-cta pull-right view-all-photos" href={{viewAllUrl}}>View All Photos</a> </div> </div> </div> </section> '},function(e,t){e.exports="<div class=quick-links> <a target=\"{{item.DiscoverIsExternal ? '_blank' : '_self'}}\" ng-repeat=\"item in news\" class=link ng-href={{item.DiscoverUrl}}> <div class=image-contain> <img ng-src={{item.DiscoverPopularIcon}}> </div> <span class=link-title>{{item.Title}}</span> </a> </div>"},function(e,t){e.exports='<div><a class="btn btn-cta" ng-click=ctrl.openManageModal()>Manage</a></div> <modal id=ci-rss-feed-manage> <div class=ci-modal> <div class=modal-body> <h1>Manage My RSS Feeds</h1> <h3>Available RSS Feeds</h3> <ul> <li ng-repeat="feed in ctrl.allFeeds track by feed.id"> <input type=checkbox ng-click=toggleSelection(feed.id) value={{feed.id}} ng-checked=ctrl.existsFeedInMyFeeds(feed.id) />{{feed.title}} </li> </ul> <button ng-click=ctrl.saveMyFeeds(); ng-disabled=!ctrl.isToolbarDirty>Save</button> <button ng-click="ctrl.closeModal(\'ci-rss-feed-manage\');">Close</button> <span>{{systemMessage}}</span> </div> </div> <div class=modal-background></div> </modal>'},function(e,t){e.exports='<section> <div class="card world-news"> <div class=card-body> <h2 class=section>World News</h2> <ul ng-repeat="item in ctrl.myFeeds" class=rss-feed> <a ng-click=toggleActiveFeed(item.id)> <span class=rss-category> <i class="fa fa-plus" ng-show="activeFeedId != item.id"></i> <i class="fa fa-minus" ng-show="activeFeedId == item.id"></i> {{ item.title }} </span> </a> <li ng-repeat="article in item.articles" class=row ng-show="activeFeedId == item.id"> <div class="col-9 rss-title"> <a href="{{ article.link }}" target=_blank>{{ article.title }}</a> </div> <div class="col-3 rss-date"> {{ article.publishedSpanString }} </div> <div class="col-12 rss-divider"><hr></div> </li> </ul> </div> </div> </section> '},function(e,t){e.exports='<div ng-show=Documents class=trending-stories> <span class=line-title>Related Documents</span> <div ng-repeat="x in Documents" class=story> <div class=reminder-date> <a ng-href={{x.url}}> <h4 class=news-title>{{x.title}}</h4> </a> </div> </div> </div> <div ng-if=notFound class=trending-stories> <span class=line-title>{{notFound}}</span> </div> <a class="btn btn-cta white" href=/sites/stage/news>View All News</a>'},function(e,t){e.exports='<section class=related-news> <div class=row> <div class=col> <h2 class=section>Related Articles</h2> </div> </div> <div class="card related"> <div class=card-body> <img class=img-card src={{topImageUrl}} alt=""> </div> </div> <div class="card related" ng-repeat="article in news track by $index"> <div class=card-body> <p class=card-date>{{article.articleDate}}</p> <a ng-href={{article.Path}}> <p class=card-text>{{article.Title}}</p> </a> <news-page-likes page-url={{article.Path}}></news-page-likes> </div> </div> <div ng-if=notFound class="card related"> <span class=card-text>{{notFound}}</span> </div> </section> '},function(e,t){e.exports='<section class=work-resources> <div class=row> <div class=col-12> <h2 class=section>Work Resources</h2> </div> </div> <div class="row news-events"> <div class=col-12> <div class="col-lg-8 search-filter"> <div class="input-group search"> <input type=text class=form-control placeholder="Search content in Work Resources" ng-model=searchText> <span class=input-group-btn> <button ng-click=ctrl.goSearch() class="btn btn-input" type=button><i class="fa fa-search"></i></button> </span> </div> </div> </div> </div> <div class=row> <div class=col-12> <h2 class=section>Or Browse by Category</h2> </div> </div> <div class=row> <div class=col-12> <ul class="nav nav-pills nav-fill"> <li class=nav-item ng-repeat="link in ctrl.resourceLinks"> <a class=nav-link ng-href="{{ link.url }}"> <img ng-src="{{ link.iconUrl }}"/> <span>{{ link.title }}</span> </a> </li> </ul> </div> </div>  </section> ';
},function(e,t){e.exports='<div class=submit> <a ng-click=ctrl.submitNews()> <span class="">Submit a Story<i class="fa fa-lightbulb-o" aria-hidden=true></i></span> </a> </div>'},function(e,t){e.exports='<section ng-if="ctrl.selectedTabId == \'ci-apps\' || ctrl.selectedTabId == \'ci-bookmarks\'"> <div><a ng-click=ctrl.openManageModal()>Manage</a></div> <modal id=ci-apps-manage> <div class=ci-modal> <div class=modal-body> <h1>Manage My Tools / Apps</h1> <h3>Available Tools / Apps</h3> <ul> <li ng-repeat="app in ctrl.allApps track by $index"> <input type=checkbox ng-click=toggleSelection(app.id) value={{app.id}} ng-checked=existsAppInMyApps(app.id) />{{app.title}} </li> </ul> <button ng-click=ctrl.saveMyApps(); ng-disabled=ctrl.enableSaveButton();>Save</button> <button ng-click="ctrl.closeModal(\'ci-apps-manage\'); ctrl.openModal(\'ci-apps-manage-sort\');">Edit Sort Order</button> <button ng-click="ctrl.closeModal(\'ci-apps-manage\');">Close</button> <span>{{systemMessage}}</span> </div> </div> <div class=modal-background></div> </modal> <modal id=ci-apps-manage-sort> <div class=ci-modal> <div class=modal-body> <h1>Manage My Tools / Apps Sort Order</h1> <ul class=container> <li ng-repeat="app in ctrl.myApps track by $index" class=row> <span class=col-8>{{app.title}}</span> <select class=col-4 ng-model=app.sortOrder ng-change="ctrl.updateSortOrder(app, {{app.sortOrder}});"> <option ng-repeat="sort in myAppsSortList" ng-value={{sort}}>{{sort}}</option> </select> </li> </ul> <button ng-click=ctrl.saveMyAppsSortOrder(); ng-disabled=ctrl.enableSaveButton();>Save</button> <button ng-click="ctrl.closeModal(\'ci-apps-manage-sort\'); ctrl.openModal(\'ci-apps-manage\');">Close</button> <span>{{systemMessage}}</span> </div> </div> <div class=modal-background></div> </modal> <modal id=ci-bookmarks-manage> <div class=ci-modal> <div class=modal-body> <h1>Manage My Bookmarks</h1> <ul> <li ng-repeat="bk in ctrl.myBookmarks track by $index"> <input type=hidden ng-model=bk.id /> <input type=text ng-model=bk.title ng-change="ctrl.isToolbarDirty = true"/> <input type=text ng-model=bk.url ng-change="ctrl.isToolbarDirty = true"/> <i class="fa fa-trash" aria-hidden=true ng-click=ctrl.confirmDeletion(bk);></i> </li> </ul> <div ng-show=ctrl.enableAddNew> <label for=bookmark-title>Title</label> <input type=text id=bookmark-title ng-model=ctrl.newBookmark.title ng-change="ctrl.isAddNewDirty = true"/> <label for=bookmark-url>Bookmark Url</label> <input type=text id=bookmark-url ng-model=ctrl.newBookmark.url ng-change="ctrl.isAddNewDirty = true"/> <button ng-click=ctrl.saveMyNewBookmark(); ng-disabled=ctrl.enableAddNewSaveButton()>Save</button> </div> <button ng-click=ctrl.saveMyBookmarks() ng-disabled=ctrl.enableSaveButton()>Save</button> <button ng-click=ctrl.addMyBookmark(); ng-disabled=ctrl.enableAddNewButton()>Add New</button> <button ng-click="ctrl.closeModal(\'ci-bookmarks-manage\');">Close</button> <span>{{systemMessage}}</span> </div> </div> <div class=modal-background></div> </modal> <modal id=ci-bookmarks-confirm-delete> <div class=ci-modal> <div class=modal-body> <h1>Bookmark Deletion Confirmation</h1> <p>Please confirm deletion of bookmark.</p> <button ng-click=ctrl.removeMyBookmark()>OK</button> <button ng-click="ctrl.closeModal(\'ci-bookmarks-confirm-delete\');ctrl.openModal(\'ci-bookmarks-manage\');">Close</button> <span>{{systemMessage}}</span> </div> </div> <div class=modal-background></div> </modal> </section> <section ng-if="ctrl.selectedTabId == \'ci-documents\'"> <div> <a class="btn btn-cta white" ng-href={{ctrl.viewAllDocumentsUrl}}>View All</a> </div> </section>'},function(e,t){e.exports='<section id=ci-toolbar-container class=nav-toolbar ng-cloak> <div id=ci-toolbar class=""> <div class=""> <ul id=ci-toolbar-selector class="nav nav-tabs"> <div class=manage-toolbar> <toolbar-manager></toolbar-manager> </div> <li class="nav-item active" data-bar=apps> <a class=nav-link ng-class="{active:ctrl.isSelected(\'ci-apps\')}" ng-click="ctrl.select(\'ci-apps\')" href="javascript: void(0);">apps + tools</a> </li> <div class="mobile-tool toolbar-content apps" ng-show="ctrl.selectedTabId == \'ci-apps\'"> <my-apps></my-apps> </div> <li class=nav-item data-bar=documents> <a class=nav-link ng-class="{active:ctrl.isSelected(\'ci-documents\')}" ng-click="ctrl.select(\'ci-documents\')" href="javascript: void(0);">documents</a> </li> <div class="mobile-tool toolbar-content documents" ng-show="ctrl.selectedTabId == \'ci-documents\'"> <h3>Recent Documents</h3> <my-documents></my-documents> </div> <li class=nav-item data-bar=bookmarks> <a class=nav-link ng-class="{active:ctrl.isSelected(\'ci-bookmarks\')}" ng-click="ctrl.select(\'ci-bookmarks\')" href="javascript: void(0);">bookmarks</a> </li> <div class="mobile-tool toolbar-content bookmarks" ng-show="ctrl.selectedTabId == \'ci-bookmarks\'"> <my-bookmarks></my-bookmarks> </div> <li class=nav-item data-bar=sites> <a class=nav-link ng-class="{active:ctrl.isSelected(\'ci-sites\')}" ng-click="ctrl.select(\'ci-sites\')" href="javascript: void(0);">project sites</a> </li> <div class="mobile-tool toolbar-content sites" ng-show="ctrl.selectedTabId == \'ci-sites\'"> <my-sites></my-sites> </div> </ul> <div class=toolbar-content id=ci-apps ng-show="ctrl.selectedTabId == \'ci-apps\'"> <my-apps></my-apps> </div> <div class=toolbar-content id=ci-documents ng-show="ctrl.selectedTabId == \'ci-documents\'"> <h3>Recent Documents</h3> <my-documents></my-documents> </div> <div class=toolbar-content id=ci-bookmarks ng-show="ctrl.selectedTabId == \'ci-bookmarks\'"> <my-bookmarks></my-bookmarks> </div> <div class=toolbar-content id=ci-sites ng-show="ctrl.selectedTabId == \'ci-sites\'"> <my-sites></my-sites> </div> </div> </div> </section>'},function(e,t){e.exports='<section class=location-places> <div class=row> <div class=col-lg-6 ng-repeat="group in groups track by $index"> <div class=card> <h5>{{group.name}}</h5> <ul> <li ng-repeat="link in group.Nodes track by $index"> <a ng-href=#> {{link.name}} </a> </li> </ul> </div> </div> </div> </section>'},function(e,t){e.exports='<div class="media weather" ng-if=temp> <div class=weather-icon> <i ng-class=image aria-hidden=true></i> </div> <div class=media-body> <span class=weather-location>{{city}}, {{state}}</span> <span class=weather-info> <span class=weather-temp>{{temp}}</span> <sup> <i class="fa fa-circle-o" aria-hidden=true></i> </sup> <span class=weather-detail>{{unit}} and {{text}}</span> </span> </div> </div> <div class="media weather" ng-if=noWeather> There was an issue connecting to the weather service </div> '}]);